<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover">
    <title>Admin Dashboard - UMak COOP</title>
    
    <!-- Mobile Web App Meta Tags -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Q-Mak Admin">
    <meta name="theme-color" content="#1e3a8a">
    <meta name="msapplication-navbutton-color" content="#1e3a8a">
    <meta name="msapplication-TileColor" content="#1e3a8a">
    <link rel="icon" type="image/svg+xml" href="../../images/logo-files/favicon-32x32-orange.svg">
    
    <!-- Tailwind CSS - Using CDN for rapid development -->
    <!-- TODO: For production optimization, consider using Tailwind CLI: https://tailwindcss.com/docs/installation -->
    <script>
        // Suppress Tailwind CDN production warning
        if (typeof console !== 'undefined' && console.warn) {
            const originalWarn = console.warn;
            console.warn = function(...args) {
                if (args[0] && args[0].includes && args[0].includes('cdn.tailwindcss.com')) {
                    return;
                }
                originalWarn.apply(console, args);
            };
        }
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
    <!-- Bootstrap Icons CDN -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <!-- Font Awesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- HTML5 QR Code Scanner Library -->
    <script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
    <!-- Custom CSS -->
    <link rel="stylesheet" href="../assets/css/root.css">
    <link rel="stylesheet" href="../assets/css/utilities.css">
    <link rel="stylesheet" href="../assets/css/mobile-common.css">
    <link rel="stylesheet" href="assets/css/admin_dashboard.css">
</head>
<body class="flex h-screen bg-gray-50">
    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Toggle navigation menu">
        <i class="bi bi-list"></i>
    </button>
    
    <!-- Mobile Sidebar Overlay -->
    <div class="mobile-sidebar-overlay" id="mobileSidebarOverlay"></div>
    
    <!-- Retractable Sidebar -->
    <div class="sidebar bg-blue-900 text-white flex flex-col fixed h-full z-100 shadow-2xl" id="sidebar">
        <div class="sidebar-content flex flex-col h-full">
            <!-- Logo Section -->
            <div class="border-b border-blue-700/50 flex-shrink-0">
                <div class="group mx-2 px-4 py-3.5 cursor-pointer transition-all duration-200 rounded-xl hover:bg-blue-700/60 flex items-center justify-center gap-3">
                    <img src="../../images/logo-files/logo-wo-text-orange.svg" alt="Q-Mak Logo" class="h-8 w-8 flex-shrink-0 object-contain">
                    <div class="menu-text flex-1 min-w-0">
                        <h3 class="text-base font-bold text-white">Q-Mak</h3>
                        <p class="text-xs text-blue-200">Admin Panel</p>
                    </div>
                </div>
            </div>

            <!-- Navigation Menu -->
            <nav class="flex-1 py-2 overflow-y-auto custom-scrollbar">
                <ul class="space-y-0.5 py-1">
                    <!-- Dashboard (Single Link) -->
                    <li onclick="showTab('queue-management')" id="tab-queue-management" class="group mx-2 px-3 py-2.5 cursor-pointer transition-all duration-200 rounded-lg bg-orange-500 hover:bg-orange-600 border-l-4 border-orange-300 shadow-lg hover:shadow-xl transform hover:translate-x-1">
                        <div class="flex items-center gap-2.5">
                            <i class="bi bi-speedometer2 menu-icon flex-shrink-0" style="font-size: 18px;"></i>
                            <span class="menu-text font-semibold text-sm">Dashboard</span>
                        </div>
                    </li>
                    
                    <!-- Operations (Collapsible Group) -->
                    <li class="nav-group">
                        <div onclick="toggleNavGroup('operations')" class="group mx-2 px-3 py-2.5 cursor-pointer transition-all duration-200 rounded-lg hover:bg-blue-700/60 border-l-4 border-transparent hover:border-orange-400 hover:shadow-md">
                            <div class="flex items-center gap-2.5 justify-between">
                                <div class="flex items-center gap-2.5">
                                    <i class="bi bi-gear-fill menu-icon flex-shrink-0" style="font-size: 18px;"></i>
                                    <span class="menu-text font-semibold text-sm">Operations</span>
                                </div>
                                <i class="bi bi-chevron-down menu-text transition-transform duration-200 text-sm" id="operations-chevron"></i>
                            </div>
                        </div>
                        <ul class="nav-submenu hidden" id="operations-submenu">
                            <li onclick="showTab('queue-management')" id="tab-queue-management-sub" class="group mx-2 ml-5 px-3 py-2 cursor-pointer transition-all duration-200 rounded-lg hover:bg-blue-700/40">
                                <div class="flex items-center gap-2.5">
                                    <i class="bi bi-list-ol menu-icon flex-shrink-0" style="font-size: 14px;"></i>
                                    <span class="menu-text text-sm">Orders</span>
                                </div>
                            </li>
                            <li onclick="showTab('queue-history')" id="tab-queue-history" class="group mx-2 ml-5 px-3 py-2 cursor-pointer transition-all duration-200 rounded-lg hover:bg-blue-700/40">
                                <div class="flex items-center gap-2.5">
                                    <i class="bi bi-printer-fill menu-icon flex-shrink-0" style="font-size: 14px;"></i>
                                    <span class="menu-text text-sm">Printing Jobs</span>
                                </div>
                            </li>
                            <li onclick="showTab('service-config')" id="tab-service-config" class="group mx-2 ml-5 px-3 py-2 cursor-pointer transition-all duration-200 rounded-lg hover:bg-blue-700/40">
                                <div class="flex items-center gap-2.5">
                                    <i class="bi bi-box-seam menu-icon flex-shrink-0" style="font-size: 14px;"></i>
                                    <span class="menu-text text-sm">Inventory</span>
                                </div>
                            </li>
                            <li onclick="showTab('services')" id="tab-services" class="group mx-2 ml-5 px-3 py-2 cursor-pointer transition-all duration-200 rounded-lg hover:bg-blue-700/40">
                                <div class="flex items-center gap-2.5">
                                    <i class="bi bi-toggle-on menu-icon flex-shrink-0" style="font-size: 14px;"></i>
                                    <span class="menu-text text-sm">Services</span>
                                </div>
                            </li>
                        </ul>
                    </li>
                    
                    <!-- User Management (Collapsible Group) -->
                    <li class="nav-group">
                        <div onclick="toggleNavGroup('users')" class="group mx-2 px-3 py-2.5 cursor-pointer transition-all duration-200 rounded-lg hover:bg-blue-700/60 border-l-4 border-transparent hover:border-orange-400 hover:shadow-md">
                            <div class="flex items-center gap-2.5 justify-between">
                                <div class="flex items-center gap-2.5">
                                    <i class="bi bi-people-fill menu-icon flex-shrink-0" style="font-size: 18px;"></i>
                                    <span class="menu-text font-semibold text-sm">User Management</span>
                                </div>
                                <i class="bi bi-chevron-down menu-text transition-transform duration-200 text-sm" id="users-chevron"></i>
                            </div>
                        </div>
                        <ul class="nav-submenu hidden" id="users-submenu">
                            <li onclick="showTab('student-records')" id="tab-student-records" class="group mx-2 ml-5 px-3 py-2 cursor-pointer transition-all duration-200 rounded-lg hover:bg-blue-700/40">
                                <div class="flex items-center gap-2.5">
                                    <i class="bi bi-person-badge menu-icon flex-shrink-0" style="font-size: 14px;"></i>
                                    <span class="menu-text text-sm">Students</span>
                                </div>
                            </li>
                            <li onclick="showTab('admin-management')" id="tab-admin-management" class="group mx-2 ml-5 px-3 py-2 cursor-pointer transition-all duration-200 rounded-lg hover:bg-blue-700/40">
                                <div class="flex items-center gap-2.5">
                                    <i class="bi bi-shield-fill-check menu-icon flex-shrink-0" style="font-size: 14px;"></i>
                                    <span class="menu-text text-sm">Admins</span>
                                </div>
                            </li>
                        </ul>
                    </li>
                    
                    <!-- System (Collapsible Group) -->
                    <li class="nav-group">
                        <div onclick="toggleNavGroup('system')" class="group mx-2 px-3 py-2.5 cursor-pointer transition-all duration-200 rounded-lg hover:bg-blue-700/60 border-l-4 border-transparent hover:border-orange-400 hover:shadow-md">
                            <div class="flex items-center gap-2.5 justify-between">
                                <div class="flex items-center gap-2.5">
                                    <i class="bi bi-cpu-fill menu-icon flex-shrink-0" style="font-size: 18px;"></i>
                                    <span class="menu-text font-semibold text-sm">System</span>
                                </div>
                                <i class="bi bi-chevron-down menu-text transition-transform duration-200 text-sm" id="system-chevron"></i>
                            </div>
                        </div>
                        <ul class="nav-submenu hidden" id="system-submenu">
                            <li onclick="showTab('analytics')" id="tab-analytics" class="group mx-2 ml-5 px-3 py-2 cursor-pointer transition-all duration-200 rounded-lg hover:bg-blue-700/40">
                                <div class="flex items-center gap-2.5">
                                    <i class="bi bi-graph-up menu-icon flex-shrink-0" style="font-size: 14px;"></i>
                                    <span class="menu-text text-sm">Reports & Analytics</span>
                                </div>
                            </li>
                            <li onclick="showTab('email-logs')" id="tab-email-logs" class="group mx-2 ml-5 px-3 py-2 cursor-pointer transition-all duration-200 rounded-lg hover:bg-blue-700/40">
                                <div class="flex items-center gap-2.5">
                                    <i class="bi bi-journal-text menu-icon flex-shrink-0" style="font-size: 14px;"></i>
                                    <span class="menu-text text-sm">Activity Logs</span>
                                </div>
                            </li>
                            <li onclick="showTab('security')" id="tab-security" class="group mx-2 ml-5 px-3 py-2 cursor-pointer transition-all duration-200 rounded-lg hover:bg-blue-700/40">
                                <div class="flex items-center gap-2.5">
                                    <i class="bi bi-shield-lock menu-icon flex-shrink-0" style="font-size: 14px;"></i>
                                    <span class="menu-text text-sm">Security</span>
                                </div>
                            </li>
                            <li onclick="showTab('admin-settings')" id="tab-admin-settings" class="group mx-2 ml-5 px-3 py-2 cursor-pointer transition-all duration-200 rounded-lg hover:bg-blue-700/40">
                                <div class="flex items-center gap-2.5">
                                    <i class="bi bi-sliders menu-icon flex-shrink-0" style="font-size: 14px;"></i>
                                    <span class="menu-text text-sm">Settings</span>
                                </div>
                            </li>
                        </ul>
                    </li>
                </ul>
            </nav>

            <!-- Admin Profile Footer with Dropup Menu -->
            <div class="border-t border-blue-700/50 flex-shrink-0 relative" id="adminProfileFooter">
                <!-- Dropup Menu (Hidden by default) -->
                <div id="adminDropupMenu" class="hidden absolute bottom-full left-0 w-full mb-2 px-2 transition-all duration-200">
                    <div class="bg-white rounded-lg shadow-xl border border-gray-200 overflow-hidden">
                        <button onclick="showTab('admin-settings'); toggleAdminMenu();" class="w-full flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-blue-50 transition-all duration-200">
                            <i class="bi bi-person-circle text-blue-600" style="font-size: 18px;"></i>
                            <span class="menu-text text-sm font-medium">My Profile</span>
                        </button>
                        <div class="border-t border-gray-100"></div>
                        <button onclick="logout()" class="w-full flex items-center gap-3 px-4 py-3 text-red-600 hover:bg-red-50 transition-all duration-200">
                            <i class="bi bi-box-arrow-right" style="font-size: 18px;"></i>
                            <span class="menu-text text-sm font-medium">Logout</span>
                        </button>
                    </div>
                </div>
                
                <!-- Profile Footer Button -->
                <div onclick="toggleAdminMenu()" class="group mx-2 my-2.5 px-3 py-3 cursor-pointer transition-all duration-300 rounded-xl hover:bg-blue-700/60 flex items-center gap-3">
                    <!-- Avatar (Always visible) -->
                    <div class="profile-avatar flex-shrink-0 w-10 h-10 rounded-full overflow-hidden border-2 border-orange-400 shadow-md" id="footerProfileAvatar">
                        <img src="../../images/Herons.png" alt="Admin Avatar" class="w-full h-full object-cover">
                    </div>
                    <!-- Name/Role (Hidden when sidebar is collapsed) -->
                    <div class="menu-text flex-1 min-w-0 transition-all duration-300">
                        <h3 class="font-bold text-sm text-white truncate" id="footerAdminName">Admin User</h3>
                        <p class="text-xs text-blue-200 truncate" id="footerAdminRole">Administrator</p>
                    </div>
                    <!-- Chevron (Hidden when sidebar is collapsed) -->
                    <i class="bi bi-chevron-up menu-text text-blue-200 transition-transform duration-300" id="adminMenuChevron"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="flex-1 overflow-y-auto bg-gray-50 main-content-adjusted" style="margin-left: 80px;">
        <!-- Top Bar -->
        <div class="bg-white/80 backdrop-blur-md shadow-lg sticky top-0 z-40 px-8 py-3 border-b border-blue-100">
            <div class="flex justify-between items-center">
                <h1 class="text-2xl font-bold text-blue-900">
                    Welcome, <span id="adminName" class="text-orange-500"></span>! 
                </h1>
                <div class="flex items-center gap-4">
                    <p class="text-gray-600 text-sm font-medium" id="currentDate"></p>
                    
                    <!-- Notification Bell -->
                    <button onclick="toggleNotifications()" class="relative p-2 hover:bg-blue-50 rounded-lg transition-all duration-200" title="System Notifications">
                        <i class="bi bi-bell-fill text-gray-700 text-xl"></i>
                        <span id="notificationBadge" class="hidden absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full min-w-[20px] h-5 flex items-center justify-center font-semibold shadow-lg">0</span>
                    </button>
                </div>
            </div>
            
            <!-- Notification Dropdown Panel -->
            <div id="notificationPanel" class="hidden absolute right-8 top-20 bg-white rounded-xl shadow-2xl border border-gray-200 w-96 max-h-[550px] overflow-hidden z-50 animate-fadeIn">
                <!-- Header -->
                <div class="p-4 border-b border-gray-200 bg-white sticky top-0">
                    <div class="flex justify-between items-center">
                        <h3 class="font-bold text-gray-800 text-lg">Notifications</h3>
                        <button onclick="markAllRead()" class="text-xs text-blue-600 hover:text-blue-800 font-semibold hover:underline transition">Mark all read</button>
                    </div>
                </div>
                
                <!-- Tab Navigation -->
                <div class="flex border-b border-gray-200 bg-gray-50">
                    <button onclick="filterNotifications('all')" id="tab-all" class="notif-tab flex-1 px-4 py-3 text-sm font-semibold text-blue-600 border-b-2 border-blue-600 bg-white transition-all">
                        All
                    </button>
                    <button onclick="filterNotifications('unread')" id="tab-unread" class="notif-tab flex-1 px-4 py-3 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-50 transition-all">
                        Unread
                    </button>
                    <button onclick="filterNotifications('read')" id="tab-read" class="notif-tab flex-1 px-4 py-3 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-50 transition-all">
                        Read
                    </button>
                </div>
                
                <!-- Notification List -->
                <div id="notificationList" class="divide-y divide-gray-100 overflow-y-auto max-h-[400px]">
                    <!-- Notifications will be loaded here -->
                </div>
            </div>
        </div>

        <div class="p-6">
            <!-- Queue Management Tab -->
            <div id="content-queue-management" class="tab-content">
                <!-- Page Header -->
                <div class="mb-8">
                    <div class="flex flex-wrap items-center justify-between gap-4">
                        <div>
                            <h2 class="text-3xl font-bold text-blue-900 mb-2">Queue & Orders Management</h2>
                            <p class="text-gray-600">Monitor and process customer orders in real-time</p>
                        </div>
                        
                        <!-- Filter Toggle Buttons -->
                        <div class="flex gap-2 bg-gray-100 p-1 rounded-lg">
                            <button 
                                id="filterTodayBtn" 
                                onclick="setQueueFilter('today')" 
                                class="queue-filter-btn active px-6 py-2.5 rounded-md font-semibold transition-all duration-200">
                                <i class="bi bi-calendar-day mr-2"></i>Today's Queue
                            </button>
                            <button 
                                id="filterUpcomingBtn" 
                                onclick="setQueueFilter('upcoming')" 
                                class="queue-filter-btn px-6 py-2.5 rounded-md font-semibold transition-all duration-200 relative">
                                <i class="bi bi-calendar-event mr-2"></i>Upcoming Orders
                                <span id="upcomingBadge" class="hidden absolute -top-2 -right-2 bg-orange-500 text-white text-xs font-bold rounded-full h-6 w-6 flex items-center justify-center">0</span>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Current Queue Display -->
                <div id="currentQueueDisplay" class="glass-effect rounded-2xl shadow-xl p-8 mb-8 border border-blue-100">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-2xl font-semibold text-blue-900">Current Queue</h3>
                        <div class="text-sm bg-orange-500 text-white px-5 py-2 rounded-full font-semibold shadow-md" id="queuePosition">Queue: -</div>
                    </div>
                    
                    <div id="currentOrderCard" class="bg-white rounded-xl p-8 shadow-sm border border-gray-100">
                        <div class="grid grid-cols-2 gap-8">
                            <div>
                                <h4 class="text-lg font-semibold text-blue-900 mb-4 flex items-center gap-2">
                                    <svg class="w-5 h-5 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                                    </svg>
                                    Order Information
                                </h4>
                                <div class="space-y-3">
                                    <div class="flex justify-between py-2 border-b border-gray-100">
                                        <span class="text-gray-600">Queue Number:</span>
                                        <span class="font-semibold text-gray-900" id="currentQueueNumber">-</span>
                                    </div>
                                    <div class="flex justify-between py-2 border-b border-gray-100">
                                        <span class="text-gray-600">Reference Number:</span>
                                        <span class="font-semibold text-purple-600" id="currentReferenceNumber">-</span>
                                    </div>
                                    <div class="flex justify-between py-2 border-b border-gray-100">
                                        <span class="text-gray-600">Item Ordered:</span>
                                        <span class="font-semibold text-gray-900" id="currentItemOrdered">-</span>
                                    </div>
                                    <div class="flex justify-between py-2">
                                        <span class="text-gray-600">Time Placed:</span>
                                        <span class="font-semibold text-gray-900" id="currentTimePlaced">-</span>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <h4 class="text-lg font-semibold text-blue-900 mb-4 flex items-center gap-2">
                                    <svg class="w-5 h-5 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                                    </svg>
                                    Student Information
                                </h4>
                                <div class="space-y-3">
                                    <div class="flex justify-between py-2 border-b border-gray-100">
                                        <span class="text-gray-600">Student ID:</span>
                                        <span class="font-semibold text-gray-900" id="currentStudentId">-</span>
                                    </div>
                                    <div class="flex justify-between py-2 border-b border-gray-100">
                                        <span class="text-gray-600">Name:</span>
                                        <span class="font-semibold text-gray-900" id="currentStudentName">-</span>
                                    </div>
                                    <div class="flex justify-between py-2 border-b border-gray-100">
                                        <span class="text-gray-600">Email:</span>
                                        <span class="font-semibold text-gray-900" id="currentStudentEmail">-</span>
                                    </div>
                                    <div class="flex justify-between py-2">
                                        <span class="text-gray-600">Program:</span>
                                        <span class="font-semibold text-gray-900" id="currentStudentProgram">-</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-8 pt-6 border-t border-gray-100">
                            <div id="queue-action-start" class="flex justify-center">
                                <button onclick="processQueue('processing')" class="bg-blue-600 hover:bg-blue-700 text-white px-10 py-3.5 rounded-xl font-semibold flex items-center gap-3 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-0.5">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                                    Start Processing
                                </button>
                            </div>
                            
                            <div id="queue-action-process" class="flex gap-4 justify-center hidden">
                                <button onclick="processQueue('completed')" class="bg-green-500 hover:bg-green-600 text-white px-8 py-3.5 rounded-xl font-semibold flex items-center gap-3 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-0.5">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
                                    Complete
                                </button>
                                <button onclick="processQueue('cancelled')" class="bg-red-500 hover:bg-red-600 text-white px-8 py-3.5 rounded-xl font-semibold flex items-center gap-3 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-0.5">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="15" x2="9" y1="9" y2="15"/><line x1="9" x2="15" y1="9" y2="15"/></svg>
                                    Cancel
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div id="noQueueMessage" class="hidden bg-white rounded-xl p-12 text-center shadow-sm border border-gray-100">
                        <div class="w-20 h-20 bg-gradient-to-br from-blue-100 to-orange-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-blue-600"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><line x1="19" x2="19" y1="8" y2="14"/><line x1="22" x2="16" y1="11" y2="11"/></svg>
                        </div>
                        <h4 class="text-xl font-semibold text-gray-700 mb-2">No Orders in Queue</h4>
                        <p class="text-gray-500">All orders have been processed or there are no pending orders.</p>
                    </div>
                </div>
                
                <!-- Queue Management Controls -->
                <div class="glass-effect rounded-2xl shadow-md p-6 mb-8 border border-gray-100">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="text-lg font-semibold text-gray-900 mb-1">Queue Management</h3>
                            <p class="text-sm text-gray-600">Manage pending orders and reschedule operations</p>
                        </div>
                        <div class="flex items-center gap-3">
                            <button onclick="manualRescheduleOrders()" 
                                    class="bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white px-6 py-3 rounded-xl font-semibold flex items-center gap-2 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-0.5">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                    <path d="m9 11 3 3L22 4"/>
                                </svg>
                                Manual Reschedule
                            </button>
                            <div class="text-sm text-gray-500 bg-gray-50 px-3 py-2 rounded-lg border">
                                <span class="font-medium">Auto-reschedule:</span> 
                                <span id="autoRescheduleTime">5:05 PM</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Summary Cards -->
                <div class="grid grid-cols-3 gap-6 mb-8">
                    <div class="glass-effect rounded-2xl p-6 text-center shadow-md border border-orange-100 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                        <div class="w-12 h-12 bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl flex items-center justify-center mx-auto mb-3 shadow-md">
                            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                        </div>
                        <h4 class="text-sm text-gray-600 mb-2 font-medium">Pending Orders</h4>
                        <p class="text-4xl font-bold bg-gradient-to-r from-orange-500 to-orange-600 bg-clip-text text-transparent" id="pendingCount">0</p>
                    </div>
                    <div class="glass-effect rounded-2xl p-6 text-center shadow-md border border-blue-100 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                        <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center mx-auto mb-3 shadow-md">
                            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                        </div>
                        <h4 class="text-sm text-gray-600 mb-2 font-medium">Ready for Pick Up</h4>
                        <p class="text-4xl font-bold bg-gradient-to-r from-blue-500 to-blue-600 bg-clip-text text-transparent" id="readyCount">0</p>
                    </div>
                    <div class="glass-effect rounded-2xl p-6 text-center shadow-md border border-green-100 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                        <div class="w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center mx-auto mb-3 shadow-md">
                            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                            </svg>
                        </div>
                        <h4 class="text-sm text-gray-600 mb-2 font-medium">Completed Today</h4>
                        <p class="text-4xl font-bold bg-gradient-to-r from-green-500 to-green-600 bg-clip-text text-transparent" id="doneCount">0</p>
                    </div>
                </div>

                <!-- Current Queue Status Table -->
                <div class="glass-effect rounded-2xl shadow-md overflow-hidden border border-gray-100">
                    <div class="p-6 bg-gray-50 border-b border-gray-200">
                        <h3 class="text-xl font-semibold text-blue-900">Current Queue Status</h3>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50 border-b border-gray-200">
                                <tr>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Queue ID</th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Student ID</th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Type</th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Item</th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Time Placed</th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Current Status</th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Action</th>
                                </tr>
                            </thead>
                            <tbody id="queueTableBody" class="divide-y divide-gray-100 bg-white">
                                <!-- Queue orders will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Student Records Tab -->
            <div id="content-student-records" class="tab-content hidden">
                <!-- Page Header -->
                <div class="mb-8">
                    <h2 class="text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-700 bg-clip-text text-transparent mb-2">Student Records</h2>
                    <p class="text-gray-600">Manage and monitor student accounts</p>
                </div>
                
                <!-- Filters and Actions -->
                <div class="glass-effect rounded-2xl shadow-md p-6 mb-6 border border-gray-100" style="overflow: visible; position: relative; z-index: 10;">
                    <div class="flex gap-4 items-center mb-4" style="overflow: visible;">
                        <input type="text" id="searchStudent" placeholder="Search by Student ID or Email..." 
                               class="flex-1 border border-gray-200 rounded-xl p-3 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all" onkeyup="filterStudents()" style="position: relative; z-index: 1;" />
                        
                        <!-- Kebab Menu -->
                        <div class="relative" id="studentKebabMenu" style="z-index: 100;">
                            <button type="button" onclick="toggleStudentMenu()" id="studentMenuBtn"
                                    class="bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white p-3 rounded-xl font-semibold shadow-md hover:shadow-lg transition-all duration-300">
                                <i class="fas fa-ellipsis-v text-xl"></i>
                            </button>
                            <div id="studentMenuDropdown" class="hidden bg-white shadow-2xl border border-gray-200" style="position: absolute; right: 0; top: 100%; margin-top: 0.5rem; width: 14rem; z-index: 10000; border-radius: 0.75rem; overflow: visible;">
                                <button type="button" onclick="enterStudentExportMode(); toggleStudentMenu()" class="w-full text-left px-4 py-3 hover:bg-blue-50 transition-colors flex items-center gap-3 border-b border-gray-100" style="border-top-left-radius: 0.75rem; border-top-right-radius: 0.75rem;">
                                    <i class="fas fa-file-excel text-green-600 w-5"></i>
                                    <span class="font-semibold text-gray-700">Export to Excel</span>
                                </button>
                                <button type="button" onclick="enterStudentArchiveMode(); toggleStudentMenu()" id="archiveStudentsBtnMenu" class="w-full text-left px-4 py-3 hover:bg-blue-50 transition-colors flex items-center gap-3 border-b border-gray-100">
                                    <i class="fas fa-archive text-blue-900 w-5"></i>
                                    <span class="font-semibold text-gray-700">Archive Students</span>
                                </button>
                                <button type="button" onclick="toggleArchivedStudentsView(); toggleStudentMenu()" id="viewArchivedStudentsBtnMenu" class="w-full text-left px-4 py-3 hover:bg-blue-50 transition-colors flex items-center gap-3" style="border-bottom-left-radius: 0.75rem; border-bottom-right-radius: 0.75rem;">
                                    <i class="fas fa-folder-open text-gray-600 w-5"></i>
                                    <span class="font-semibold text-gray-700">View Archived</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div id="studentActions" class="hidden flex gap-2">
                        <button onclick="exportAllStudents()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-xl font-bold text-sm">
                            <i class="fas fa-file-excel mr-2"></i>Export All
                        </button>
                        <button onclick="exportSelectedStudents()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl font-bold text-sm">
                            <i class="fas fa-check-square mr-2"></i>Export Selected (<span id="selectedStudentCount">0</span>)
                        </button>
                        <button onclick="exitStudentExportMode()" class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-xl font-bold text-sm">
                            <i class="fas fa-times mr-2"></i>Cancel
                        </button>
                    </div>
                    <div id="studentArchiveActions" class="hidden flex gap-2">
                        <button onclick="archiveAllStudents()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-xl font-bold text-sm">
                            <i class="fas fa-archive mr-2"></i>Archive All
                        </button>
                        <button onclick="archiveSelectedStudents()" class="bg-blue-900 hover:bg-blue-800 text-white px-4 py-2 rounded-xl font-bold text-sm">
                            <i class="fas fa-check-square mr-2"></i>Archive Selected (<span id="selectedStudentArchiveCount">0</span>)
                        </button>
                        <button onclick="restoreAllStudents()" id="restoreAllStudentsBtn" class="hidden bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl font-bold text-sm">
                            <i class="fas fa-undo mr-2"></i>Restore All
                        </button>
                        <button onclick="restoreSelectedStudents()" id="restoreSelectedStudentsBtn" class="hidden bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl font-bold text-sm">
                            <i class="fas fa-check-square mr-2"></i>Restore Selected (<span id="selectedStudentRestoreCount">0</span>)
                        </button>
                        <button onclick="exitStudentArchiveMode()" class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-xl font-bold text-sm">
                            <i class="fas fa-times mr-2"></i>Cancel
                        </button>
                    </div>
                </div>
                
                <div class="glass-effect rounded-2xl shadow-md overflow-hidden border border-gray-100" style="position: relative; z-index: 1;">
                    <div class="p-6 bg-gray-50 border-b border-gray-200">
                        <h3 class="text-xl font-semibold text-blue-900" id="studentsTableTitle">Active Students</h3>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50 border-b border-gray-200">
                                <tr>
                                    <th class="px-6 py-4 text-left student-checkbox-column hidden">
                                        <input type="checkbox" id="selectAllStudents" onchange="toggleSelectAllStudents()" class="w-4 h-4">
                                    </th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Student ID</th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Full Name</th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Email</th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Account Status</th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Total Orders</th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">College</th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Program</th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Action</th>
                                </tr>
                            </thead>
                            <tbody id="studentTableBody" class="divide-y divide-gray-100 bg-white">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Inventory Management Tab -->
            <div id="content-service-config" class="tab-content hidden">
                <!-- Page Header -->
                <div class="mb-8">
                    <h2 class="text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-700 bg-clip-text text-transparent mb-2 flex items-center gap-2">
                        <i class="bi bi-boxes"></i>Inventory Management
                    </h2>
                    <p class="text-gray-600">Manage stock levels and item availability</p>
                </div>
                
                <!-- Stats Cards -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                    <div class="glass-effect rounded-2xl p-6 shadow-md border border-gray-100 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                        <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center mx-auto mb-3 shadow-md">
                            <i class="bi bi-box text-white text-xl"></i>
                        </div>
                        <div class="text-sm text-gray-600 mb-1 text-center font-medium">Total Items</div>
                        <div class="text-3xl font-bold text-center bg-gradient-to-r from-blue-500 to-blue-600 bg-clip-text text-transparent" id="totalItems">0</div>
                    </div>
                    <div class="glass-effect rounded-2xl p-6 shadow-md border border-green-100 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                        <div class="w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center mx-auto mb-3 shadow-md">
                            <i class="bi bi-check-circle-fill text-white text-xl"></i>
                        </div>
                        <div class="text-sm text-gray-600 mb-1 text-center font-medium">In Stock</div>
                        <div class="text-3xl font-bold text-center bg-gradient-to-r from-green-500 to-green-600 bg-clip-text text-transparent" id="inStockCount">0</div>
                    </div>
                    <div class="glass-effect rounded-2xl p-6 shadow-md border border-yellow-100 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                        <div class="w-12 h-12 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-xl flex items-center justify-center mx-auto mb-3 shadow-md">
                            <i class="bi bi-exclamation-triangle-fill text-white text-xl"></i>
                        </div>
                        <div class="text-sm text-gray-600 mb-1 text-center font-medium">Low Stock</div>
                        <div class="text-3xl font-bold text-center bg-gradient-to-r from-yellow-500 to-yellow-600 bg-clip-text text-transparent" id="lowStockCount">0</div>
                    </div>
                    <div class="glass-effect rounded-2xl p-6 shadow-md border border-red-100 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                        <div class="w-12 h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-xl flex items-center justify-center mx-auto mb-3 shadow-md">
                            <i class="bi bi-x-circle-fill text-white text-xl"></i>
                        </div>
                        <div class="text-sm text-gray-600 mb-1 text-center font-medium">Out of Stock</div>
                        <div class="text-3xl font-bold text-center bg-gradient-to-r from-red-500 to-red-600 bg-clip-text text-transparent" id="outOfStockCount">0</div>
                    </div>
                </div>

                <!-- Add Item Button -->
                <div class="mb-6 flex justify-end items-center">
                    <button onclick="showAddItemModal()" class="px-6 py-3 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white rounded-xl font-semibold shadow-lg transition-all hover:shadow-xl duration-300 transform hover:-translate-y-0.5">
                        <i class="fas fa-plus mr-2"></i>Add New Item
                    </button>
                </div>

                <!-- Inventory Table -->
                <div class="glass-effect rounded-2xl shadow-md overflow-hidden border border-gray-100">
                    <div class="p-4 bg-gray-50 border-b border-gray-200">
                        <input type="text" id="inventorySearchInput" placeholder="Search items..." 
                               class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all"
                               oninput="filterInventoryItems()">
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50 border-b border-gray-200">
                                <tr>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Item Name</th>
                                    <th class="px-6 py-4 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider">Stock</th>
                                    <th class="px-6 py-4 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider">Low Stock Alert</th>
                                    <th class="px-6 py-4 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider">Est. Time (min)</th>
                                    <th class="px-6 py-4 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider">Status</th>
                                    <th class="px-6 py-4 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider">Available</th>
                                    <th class="px-6 py-4 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="inventoryTableBody" class="divide-y divide-gray-100 bg-white">
                                <tr>
                                    <td colspan="7" class="px-6 py-8 text-center text-gray-500">
                                        <i class="fas fa-spinner fa-spin text-2xl mb-2"></i>
                                        <p>Loading inventory...</p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Add/Edit Item Modal -->
                <div id="itemModal" class="modal" style="display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;">
                    <div class="modal-content" style="background: white; padding: 2rem; border-radius: 1rem; max-width: 600px; width: 90%; max-height: 90vh; overflow-y: auto;">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-2xl font-bold" id="modalTitle">Add New Item</h2>
                            <button onclick="closeItemModal()" class="text-gray-400 hover:text-gray-600">
                                <i class="fas fa-times text-2xl"></i>
                            </button>
                        </div>
                        <form id="itemForm" onsubmit="saveInventoryItem(event)">
                            <input type="hidden" id="itemId">
                            
                            <div class="mb-4">
                                <label class="block text-gray-700 font-semibold mb-2">Item Name *</label>
                                <input type="text" id="itemName" required class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                            </div>

                            <div class="mb-4">
                                <label class="block text-gray-700 font-semibold mb-2">Description</label>
                                <textarea id="itemDescription" rows="3" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                            </div>

                            <div class="grid grid-cols-2 gap-4 mb-4">
                                <div>
                                    <label class="block text-gray-700 font-semibold mb-2">Stock Quantity *</label>
                                    <input type="number" id="stockQuantity" min="0" required class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                </div>
                                <div>
                                    <label class="block text-gray-700 font-semibold mb-2">Low Stock Alert At</label>
                                    <input type="number" id="lowStockThreshold" min="1" value="20" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                </div>
                            </div>

                            <div class="mb-4">
                                <label class="block text-gray-700 font-semibold mb-2">Estimated Time (minutes) *</label>
                                <input type="number" id="estimatedTime" min="1" value="10" required class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                            </div>

                            <div class="mb-6">
                                <label class="flex items-center">
                                    <input type="checkbox" id="isActive" checked class="mr-2">
                                    <span class="text-gray-700">Active (visible to students)</span>
                                </label>
                            </div>

                            <div class="flex gap-4">
                                <button type="button" onclick="closeItemModal()" class="flex-1 px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg">
                                    Cancel
                                </button>
                                <button type="submit" class="flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg">
                                    <i class="fas fa-save mr-2"></i>Save Item
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Stock Adjustment Modal -->
                <div id="stockModal" class="modal" style="display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;">
                    <div class="modal-content" style="background: white; padding: 2rem; border-radius: 1rem; max-width: 500px; width: 90%;">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-2xl font-bold">Adjust Stock</h2>
                            <button onclick="closeStockModal()" class="text-gray-400 hover:text-gray-600">
                                <i class="fas fa-times text-2xl"></i>
                            </button>
                        </div>
                        <form id="stockForm" onsubmit="adjustInventoryStock(event)">
                            <input type="hidden" id="stockItemId">
                            
                            <div class="mb-4">
                                <p class="text-gray-700 font-semibold" id="stockItemName"></p>
                                <p class="text-sm text-gray-500">Current Stock: <span id="currentStock" class="font-bold"></span></p>
                            </div>

                            <div class="mb-4">
                                <label class="block text-gray-700 font-semibold mb-2">New Stock Quantity *</label>
                                <input type="number" id="newStockQuantity" min="0" required class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                            </div>

                            <div class="mb-6">
                                <label class="block text-gray-700 font-semibold mb-2">Reason</label>
                                <input type="text" id="stockReason" placeholder="e.g., Restock, Inventory count" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                            </div>

                            <div class="flex gap-4">
                                <button type="button" onclick="closeStockModal()" class="flex-1 px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg">
                                    Cancel
                                </button>
                                <button type="submit" class="flex-1 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg">
                                    <i class="fas fa-check mr-2"></i>Update Stock
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <style>
                    .modal.active { display: flex !important; }
                    .stock-badge {
                        padding: 4px 12px;
                        border-radius: 12px;
                        font-size: 0.75rem;
                        font-weight: 600;
                    }
                    .stock-in { background-color: #d1fae5; color: #065f46; }
                    .stock-low { background-color: #fef3c7; color: #92400e; }
                    .stock-out { background-color: #fee2e2; color: #991b1b; }
                    
                    /* Queue Filter Button Styles */
                    .queue-filter-btn {
                        background: transparent;
                        color: #6b7280;
                        border: none;
                        cursor: pointer;
                        transition: all 0.2s ease;
                    }
                    
                    .queue-filter-btn:hover {
                        background: rgba(59, 130, 246, 0.1);
                        color: #1e40af;
                    }
                    
                    .queue-filter-btn.active {
                        background: white;
                        color: #1e40af;
                        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                    }
                    
                    .queue-filter-btn i {
                        font-size: 1rem;
                    }
                </style>
            </div>

            <!-- Edit Service Modal -->
            <div id="editServiceModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
                <div class="bg-white rounded-lg shadow-xl p-8 max-w-md w-full mx-4">
                    <h3 class="text-2xl font-bold text-blue-900 mb-4">Edit Service</h3>
                    <form id="editServiceForm" class="space-y-4">
                        <input type="hidden" id="editServiceId" />
                        <div>
                            <label class="block font-bold mb-1">Service Name *</label>
                            <input type="text" id="editServiceName" required class="w-full border border-gray-300 rounded p-2" />
                        </div>
                        <div>
                            <label class="block font-bold mb-1">Estimated Time (mins) *</label>
                            <input type="number" id="editServiceTime" required min="1" class="w-full border border-gray-300 rounded p-2" />
                        </div>
                        <div>
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" id="editServiceActive" class="w-4 h-4" />
                                <span class="font-bold">Active</span>
                            </label>
                        </div>
                        <div class="flex gap-4">
                            <button type="submit" class="flex-1 bg-blue-900 hover:bg-blue-800 text-white px-6 py-2 rounded font-bold">
                                Update
                            </button>
                            <button type="button" onclick="closeEditServiceModal()" class="flex-1 bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded font-bold">
                                Cancel
                            </button>
                        </div>
                    </form>
                    <div id="editServiceMessage" class="mt-4 text-sm font-medium"></div>
                </div>
            </div>

            <!-- Email Logs Tab -->
            <div id="content-email-logs" class="tab-content hidden">
                <!-- Page Header -->
                <div class="mb-8">
                    <h2 class="text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-700 bg-clip-text text-transparent mb-2">Email Logs</h2>
                    <p class="text-gray-600">Monitor email delivery and troubleshoot issues</p>
                </div>
                
                <!-- Statistics Cards -->
                <div class="grid grid-cols-4 gap-6 mb-8">
                    <div class="glass-effect rounded-2xl p-6 text-center shadow-md border border-blue-100 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                        <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center mx-auto mb-3 shadow-md">
                            <i class="bi bi-envelope-fill text-white text-xl"></i>
                        </div>
                        <h4 class="text-sm text-gray-600 mb-2 font-medium">Total Emails</h4>
                        <p class="text-3xl font-bold bg-gradient-to-r from-blue-500 to-blue-600 bg-clip-text text-transparent" id="totalEmails">0</p>
                    </div>
                    <div class="glass-effect rounded-2xl p-6 text-center shadow-md border border-green-100 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                        <div class="w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center mx-auto mb-3 shadow-md">
                            <i class="bi bi-check-circle-fill text-white text-xl"></i>
                        </div>
                        <h4 class="text-sm text-gray-600 mb-2 font-medium">Successfully Sent</h4>
                        <p class="text-3xl font-bold bg-gradient-to-r from-green-500 to-green-600 bg-clip-text text-transparent" id="sentEmails">0</p>
                    </div>
                    <div class="glass-effect rounded-2xl p-6 text-center shadow-md border border-red-100 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                        <div class="w-12 h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-xl flex items-center justify-center mx-auto mb-3 shadow-md">
                            <i class="bi bi-x-circle-fill text-white text-xl"></i>
                        </div>
                        <h4 class="text-sm text-gray-600 mb-2 font-medium">Failed</h4>
                        <p class="text-3xl font-bold bg-gradient-to-r from-red-500 to-red-600 bg-clip-text text-transparent" id="failedEmails">0</p>
                    </div>
                    <div class="glass-effect rounded-2xl p-6 text-center shadow-md border border-indigo-100 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                        <div class="w-12 h-12 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-xl flex items-center justify-center mx-auto mb-3 shadow-md">
                            <i class="bi bi-percent text-white text-xl"></i>
                        </div>
                        <h4 class="text-sm text-gray-600 mb-2 font-medium">Success Rate</h4>
                        <p class="text-3xl font-bold bg-gradient-to-r from-indigo-500 to-indigo-600 bg-clip-text text-transparent" id="successRate">0%</p>
                    </div>
                </div>
                
                <!-- Filters and Actions -->
                <div class="glass-effect rounded-2xl shadow-md p-6 mb-6 border border-gray-100" style="overflow: visible; position: relative; z-index: 10;">
                    <div class="flex gap-4 items-center mb-4" style="overflow: visible;">
                        <select id="filterEmailType" onchange="fetchEmailLogs()" class="border border-gray-200 rounded-xl p-3 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all" style="position: relative; z-index: 1;">
                            <option value="all">All Types</option>
                            <option value="otp">OTP</option>
                            <option value="receipt">Receipt</option>
                            <option value="status_update">Status Update</option>
                        </select>
                        <select id="filterEmailStatus" onchange="fetchEmailLogs()" class="border border-gray-200 rounded-xl p-3 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all" style="position: relative; z-index: 1;">
                            <option value="all">All Status</option>
                            <option value="sent">Sent</option>
                            <option value="failed">Failed</option>
                        </select>
                        <input type="text" id="searchEmail" placeholder="Search by email..." 
                               onkeyup="fetchEmailLogs()" class="flex-1 border border-gray-200 rounded-xl p-3 focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all" style="position: relative; z-index: 1;" />
                        
                        <!-- Kebab Menu -->
                        <div class="relative" id="emailKebabMenu" style="z-index: 100;">
                            <button type="button" onclick="toggleEmailMenu()" id="emailMenuBtn"
                                    class="bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white p-3 rounded-xl font-semibold shadow-md hover:shadow-lg transition-all duration-300">
                                <i class="fas fa-ellipsis-v text-xl"></i>
                            </button>
                            <div id="emailMenuDropdown" class="hidden bg-white shadow-2xl border border-gray-200" style="position: absolute; right: 0; top: 100%; margin-top: 0.5rem; width: 14rem; z-index: 10000; border-radius: 0.75rem; overflow: visible;">
                                <button type="button" onclick="exportEmailLogsToExcel(); toggleEmailMenu()" class="w-full text-left px-4 py-3 hover:bg-blue-50 transition-colors flex items-center gap-3 border-b border-gray-100" style="border-top-left-radius: 0.75rem; border-top-right-radius: 0.75rem;">
                                    <i class="fas fa-file-excel text-green-600 w-5"></i>
                                    <span class="font-semibold text-gray-700">Export to Excel</span>
                                </button>
                                <button type="button" onclick="enterEmailArchiveMode(); toggleEmailMenu()" id="archiveEmailLogsBtnMenu" class="w-full text-left px-4 py-3 hover:bg-blue-50 transition-colors flex items-center gap-3 border-b border-gray-100">
                                    <i class="fas fa-archive text-blue-900 w-5"></i>
                                    <span class="font-semibold text-gray-700">Archive Logs</span>
                                </button>
                                <button type="button" onclick="toggleArchivedView(); toggleEmailMenu()" id="viewArchivedBtnMenu" class="w-full text-left px-4 py-3 hover:bg-blue-50 transition-colors flex items-center gap-3" style="border-bottom-left-radius: 0.75rem; border-bottom-right-radius: 0.75rem;">
                                    <i class="fas fa-folder-open text-gray-600 w-5"></i>
                                    <span class="font-semibold text-gray-700">View Archived</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div id="emailLogActions" class="hidden flex gap-2">
                        <button onclick="archiveAllEmailLogs()" id="archiveAllBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-xl font-bold text-sm">
                            <i class="fas fa-archive mr-2"></i>Archive All
                        </button>
                        <button onclick="archiveSelectedLogs()" id="archiveLogsBtn" class="bg-blue-900 hover:bg-blue-800 text-white px-4 py-2 rounded-xl font-bold text-sm">
                            <i class="fas fa-check-square mr-2"></i>Archive Selected (<span id="selectedCount">0</span>)
                        </button>
                        <button onclick="restoreAllEmailLogs()" id="restoreAllBtn" class="hidden bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl font-bold text-sm">
                            <i class="fas fa-undo mr-2"></i>Restore All
                        </button>
                        <button onclick="restoreSelectedLogs()" id="restoreLogsBtn" class="hidden bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl font-bold text-sm">
                            <i class="fas fa-check-square mr-2"></i>Restore Selected (<span id="selectedCountRestore">0</span>)
                        </button>
                        <button onclick="deleteSelectedLogs()" id="deleteLogsBtn" class="hidden bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-xl font-bold text-sm">
                            <i class="fas fa-trash mr-2"></i>Delete Selected (<span id="selectedCountDelete">0</span>)
                        </button>
                        <button onclick="exitEmailArchiveMode()" class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-xl font-bold text-sm">
                            <i class="fas fa-times mr-2"></i>Cancel
                        </button>
                    </div>
                </div>
                
                <!-- Email Logs Table -->
                <div class="bg-white rounded-lg shadow overflow-hidden" style="position: relative; z-index: 1;">
                    <div class="p-6">
                        <h3 class="text-xl font-bold text-blue-900 mb-4" id="emailLogsTableTitle">Email History</h3>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-100">
                                <tr>
                                    <th class="px-6 py-3 text-left email-log-checkbox-column hidden">
                                        <input type="checkbox" id="selectAllLogs" onchange="toggleSelectAllLogs()" class="w-4 h-4">
                                    </th>
                                    <th class="px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase">Log ID</th>
                                    <th class="px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase">Recipient</th>
                                    <th class="px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase">Type</th>
                                    <th class="px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase">Subject</th>
                                    <th class="px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase">Sent At</th>
                                    <th class="px-6 py-3 text-left text-xs font-bold text-blue-900 uppercase">Status</th>
                                </tr>
                            </thead>
                            <tbody id="emailLogsTableBody" class="divide-y divide-gray-200">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Admin Settings Tab -->
            <div id="content-admin-settings" class="tab-content hidden">
                <!-- Enhanced Page Header with Breadcrumb -->
                <div class="mb-8">
                    <div class="flex items-center gap-2 text-sm text-gray-500 mb-3">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                        </svg>
                        <span>Dashboard</span>
                        <span>/</span>
                        <span class="text-gray-900 font-medium">Settings</span>
                    </div>
                    <div class="flex items-center justify-between">
                        <div>
                            <h2 class="text-3xl font-bold text-gray-900 mb-1 flex items-center gap-3">
                                <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                                </svg>
                                Settings
                                <span id="unsaved-indicator" class="hidden text-sm font-normal text-orange-600 bg-orange-50 px-3 py-1 rounded-full border border-orange-200 animate-pulse">
                                    Unsaved changes
                                </span>
                            </h2>
                            <p class="text-gray-500 text-sm">Configure and manage your Q-Mak system settings</p>
                        </div>
                    </div>
                </div>
                
                <!-- Enhanced Settings Navigation Tabs with Icons -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 mb-6 overflow-hidden">
                    <div class="flex border-b border-gray-200 overflow-x-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100">
                        <button onclick="switchSettingsTab('system')" id="settings-tab-system" 
                                class="settings-tab group px-5 py-4 font-medium text-gray-900 border-b-3 border-blue-600 bg-blue-50/50 whitespace-nowrap flex items-center gap-2 transition-all duration-200">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z" />
                            </svg>
                            <span>System</span>
                        </button>
                        <button onclick="switchSettingsTab('queue')" id="settings-tab-queue" 
                                class="settings-tab group px-5 py-4 font-medium text-gray-600 border-b-3 border-transparent hover:text-gray-900 hover:border-gray-300 hover:bg-gray-50 whitespace-nowrap flex items-center gap-2 transition-all duration-200">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16" />
                            </svg>
                            <span>Queue</span>
                        </button>
                        <button onclick="switchSettingsTab('email')" id="settings-tab-email" 
                                class="settings-tab group px-5 py-4 font-medium text-gray-600 border-b-3 border-transparent hover:text-gray-900 hover:border-gray-300 hover:bg-gray-50 whitespace-nowrap flex items-center gap-2 transition-all duration-200">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                            </svg>
                            <span>Email</span>
                        </button>
                        <button onclick="switchSettingsTab('timing')" id="settings-tab-timing" 
                                class="settings-tab group px-5 py-4 font-medium text-gray-600 border-b-3 border-transparent hover:text-gray-900 hover:border-gray-300 hover:bg-gray-50 whitespace-nowrap flex items-center gap-2 transition-all duration-200">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            <span>Timing</span>
                        </button>
                        <button onclick="switchSettingsTab('working-hours')" id="settings-tab-working-hours" 
                                class="settings-tab group px-5 py-4 font-medium text-gray-600 border-b-3 border-transparent hover:text-gray-900 hover:border-gray-300 hover:bg-gray-50 whitespace-nowrap flex items-center gap-2 transition-all duration-200">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                            </svg>
                            <span>Hours</span>
                        </button>
                        <button onclick="switchSettingsTab('special-dates')" id="settings-tab-special-dates" 
                                class="settings-tab group px-5 py-4 font-medium text-gray-600 border-b-3 border-transparent hover:text-gray-900 hover:border-gray-300 hover:bg-gray-50 whitespace-nowrap flex items-center gap-2 transition-all duration-200">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
                            </svg>
                            <span>Special</span>
                        </button>
                        <button onclick="switchSettingsTab('account')" id="settings-tab-account" 
                                class="settings-tab group px-5 py-4 font-medium text-gray-600 border-b-3 border-transparent hover:text-gray-900 hover:border-gray-300 hover:bg-gray-50 whitespace-nowrap flex items-center gap-2 transition-all duration-200">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                            </svg>
                            <span>Account</span>
                        </button>
                    </div>
                </div>
                
                <!-- System Settings Content -->
                <div id="settings-content-system" class="settings-content">
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 max-w-3xl">
                        <h3 class="text-lg font-semibold text-gray-900 mb-6">System Configuration</h3>
                        
                        <div class="space-y-6">
                            <!-- Order Cutoff Time -->
                            <div class="pb-6 border-b border-gray-200">
                                <label class="block text-sm font-medium text-gray-700 mb-3">Order Cutoff Time</label>
                                <p class="text-xs text-gray-500 mb-3">Minutes before closing time to stop accepting new orders</p>
                                <div class="flex items-center gap-3">
                                    <input type="number" id="orderCutoffMinutes" value="30" min="0" max="120" 
                                           class="w-24 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" />
                                    <span class="text-sm text-gray-600">minutes</span>
                                </div>
                            </div>
                            
                            <!-- Auto-Move Pending Orders -->
                            <div class="pb-6 border-b border-gray-200">
                                <label class="block text-sm font-medium text-gray-700 mb-3">Auto-Move Pending Orders</label>
                                <p class="text-xs text-gray-500 mb-3">Automatically move pending orders to next business day at closing time</p>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" id="autoMovePending" class="sr-only peer" checked>
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                    <span class="ml-3 text-sm text-gray-700">Enabled</span>
                                </label>
                            </div>
                            
                            <!-- Average Processing Time -->
                            <div class="pb-6 border-b border-gray-200">
                                <label class="block text-sm font-medium text-gray-700 mb-3">Average Processing Time</label>
                                <p class="text-xs text-gray-500 mb-3">Base time per order for queue estimation</p>
                                <div class="flex items-center gap-3">
                                    <input type="number" id="avgProcessTime" value="5" min="1" max="60" 
                                           class="w-24 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" />
                                    <span class="text-sm text-gray-600">minutes</span>
                                </div>
                            </div>
                            
                            <!-- Item Complexity Factor -->
                            <div class="pb-6 border-b border-gray-200">
                                <label class="block text-sm font-medium text-gray-700 mb-3">Item Complexity Factor</label>
                                <p class="text-xs text-gray-500 mb-3">Additional time per item in order</p>
                                <div class="flex items-center gap-3">
                                    <input type="number" id="itemComplexity" value="2" min="0" max="10" 
                                           class="w-24 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" />
                                    <span class="text-sm text-gray-600">minutes per item</span>
                                </div>
                            </div>
                            
                            <!-- Daily Queue Reset -->
                            <div class="pb-6 border-b border-gray-200">
                                <label class="block text-sm font-medium text-gray-700 mb-3">Daily Queue Reset</label>
                                <p class="text-xs text-gray-500 mb-3">Reset queue number counter at start of business day</p>
                                <button onclick="resetDailyQueue()" 
                                        class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-lg transition-colors">
                                    Reset Queue Number
                                </button>
                                <div id="queueResetMessage" class="mt-2 text-xs font-medium"></div>
                            </div>
                            
                            <div class="flex justify-end pt-2">
                                <button onclick="saveSystemSettings()" 
                                        class="px-6 py-2 bg-gray-900 hover:bg-gray-800 text-white text-sm font-medium rounded-lg transition-colors">
                                    Save Changes
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Queue Configuration Content -->
                <div id="settings-content-queue" class="settings-content hidden">
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 max-w-3xl">
                        <h3 class="text-lg font-semibold text-gray-900 mb-6">Queue Configuration</h3>
                        
                        <div class="space-y-6">
                            <!-- Queue Prefix -->
                            <div class="pb-6 border-b border-gray-200">
                                <label class="block text-sm font-medium text-gray-700 mb-3">Queue Prefix</label>
                                <p class="text-xs text-gray-500 mb-3">Prefix for queue numbers (e.g., Q-001)</p>
                                <input type="text" id="queuePrefix" 
                                       class="w-32 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" 
                                       placeholder="Q-" maxlength="5" />
                            </div>
                            
                            <!-- Queue Start Number -->
                            <div class="pb-6 border-b border-gray-200">
                                <label class="block text-sm font-medium text-gray-700 mb-3">Queue Start Number</label>
                                <p class="text-xs text-gray-500 mb-3">Starting number for queue sequence</p>
                                <input type="number" id="queueStartNumber" min="1" max="999" 
                                       class="w-32 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" />
                            </div>
                            
                            <!-- Reference Prefix -->
                            <div class="pb-6 border-b border-gray-200">
                                <label class="block text-sm font-medium text-gray-700 mb-3">Reference Prefix</label>
                                <p class="text-xs text-gray-500 mb-3">Prefix for order reference numbers</p>
                                <input type="text" id="referencePrefix" 
                                       class="w-32 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" 
                                       placeholder="QMAK-" maxlength="10" />
                            </div>
                            
                            <!-- Wait Time Settings -->
                            <div class="pb-6 border-b border-gray-200">
                                <label class="block text-sm font-medium text-gray-700 mb-3">Wait Time Calculation Method</label>
                                <p class="text-xs text-gray-500 mb-3">How to calculate estimated wait time</p>
                                <select id="waitTimeMethod" 
                                        class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                    <option value="fixed">Fixed Time per Order</option>
                                    <option value="dynamic">Dynamic (based on order complexity)</option>
                                    <option value="historical">Historical Average</option>
                                </select>
                            </div>
                            
                            <!-- Queue Reset Time -->
                            <div class="pb-6 border-b border-gray-200">
                                <label class="block text-sm font-medium text-gray-700 mb-3">Auto Queue Reset Time</label>
                                <p class="text-xs text-gray-500 mb-3">Time to automatically reset queue numbers daily</p>
                                <input type="time" id="queueResetTime" 
                                       class="border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" />
                            </div>
                            
                            <div class="flex justify-end pt-2">
                                <button onclick="saveQueueSettings()" 
                                        class="px-6 py-2 bg-gray-900 hover:bg-gray-800 text-white text-sm font-medium rounded-lg transition-colors">
                                    Save Changes
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Email & Notifications Content -->
                <div id="settings-content-email" class="settings-content hidden">
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 max-w-3xl">
                        <h3 class="text-lg font-semibold text-gray-900 mb-6">Email & Notification Settings</h3>
                        
                        <div class="space-y-6">
                            <!-- Email From Name -->
                            <div class="pb-6 border-b border-gray-200">
                                <label class="block text-sm font-medium text-gray-700 mb-3">Email From Name</label>
                                <p class="text-xs text-gray-500 mb-3">Display name for outgoing emails</p>
                                <input type="text" id="emailFromName" 
                                       class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" 
                                       placeholder="Q-Mak Queue System" />
                            </div>
                            
                            <!-- Email From Address -->
                            <div class="pb-6 border-b border-gray-200">
                                <label class="block text-sm font-medium text-gray-700 mb-3">Email From Address</label>
                                <p class="text-xs text-gray-500 mb-3">Sender email address</p>
                                <input type="email" id="emailFromAddress" 
                                       class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" 
                                       placeholder="noreply@qmak.com" />
                            </div>
                            
                            <!-- Auto Notifications -->
                            <div class="pb-6 border-b border-gray-200">
                                <label class="block text-sm font-medium text-gray-700 mb-3">Auto Email Notifications</label>
                                <p class="text-xs text-gray-500 mb-3">Send automatic email notifications for order updates</p>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" id="autoEmailNotifications" class="sr-only peer">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                    <span class="ml-3 text-sm text-gray-700">Enabled</span>
                                </label>
                            </div>
                            
                            <!-- Enable OTP -->
                            <div class="pb-6 border-b border-gray-200">
                                <label class="block text-sm font-medium text-gray-700 mb-3">OTP Email Verification</label>
                                <p class="text-xs text-gray-500 mb-3">Require email OTP for order placement</p>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" id="enableOTP" class="sr-only peer">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                    <span class="ml-3 text-sm text-gray-700">Enabled</span>
                                </label>
                            </div>
                            
                            <!-- Enable QR -->
                            <div class="pb-6 border-b border-gray-200">
                                <label class="block text-sm font-medium text-gray-700 mb-3">QR Code Verification</label>
                                <p class="text-xs text-gray-500 mb-3">Generate QR codes for order verification</p>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" id="enableQR" class="sr-only peer">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                    <span class="ml-3 text-sm text-gray-700">Enabled</span>
                                </label>
                            </div>
                            
                            <div class="flex justify-end pt-2">
                                <button onclick="saveEmailSettings()" 
                                        class="px-6 py-2 bg-gray-900 hover:bg-gray-800 text-white text-sm font-medium rounded-lg transition-colors">
                                    Save Changes
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Time & Expiry Content -->
                <div id="settings-content-timing" class="settings-content hidden">
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 max-w-3xl">
                        <h3 class="text-lg font-semibold text-gray-900 mb-6">Time & Expiry Settings</h3>
                        
                        <div class="space-y-6">
                            <!-- OTP Expiry -->
                            <div class="pb-6 border-b border-gray-200">
                                <label class="block text-sm font-medium text-gray-700 mb-3">OTP Expiry Time</label>
                                <p class="text-xs text-gray-500 mb-3">How long OTP codes remain valid</p>
                                <div class="flex items-center gap-3">
                                    <input type="number" id="otpExpiryMinutes" min="1" max="30" 
                                           class="w-24 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" />
                                    <span class="text-sm text-gray-600">minutes</span>
                                </div>
                            </div>
                            
                            <!-- QR Expiry -->
                            <div class="pb-6 border-b border-gray-200">
                                <label class="block text-sm font-medium text-gray-700 mb-3">QR Code Expiry Time</label>
                                <p class="text-xs text-gray-500 mb-3">How long QR codes remain valid</p>
                                <div class="flex items-center gap-3">
                                    <input type="number" id="qrExpiryMinutes" min="5" max="60" 
                                           class="w-24 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" />
                                    <span class="text-sm text-gray-600">minutes</span>
                                </div>
                            </div>
                            
                            <!-- Preorder Cutoff Hours -->
                            <div class="pb-6 border-b border-gray-200">
                                <label class="block text-sm font-medium text-gray-700 mb-3">Preorder Cutoff Hours</label>
                                <p class="text-xs text-gray-500 mb-3">Hours before opening to stop accepting preorders</p>
                                <div class="flex items-center gap-3">
                                    <input type="number" id="preorderCutoffHours" min="1" max="48" 
                                           class="w-24 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" />
                                    <span class="text-sm text-gray-600">hours</span>
                                </div>
                            </div>
                            
                            <!-- Preorder Max Days -->
                            <div class="pb-6 border-b border-gray-200">
                                <label class="block text-sm font-medium text-gray-700 mb-3">Preorder Maximum Days</label>
                                <p class="text-xs text-gray-500 mb-3">How far in advance customers can place preorders</p>
                                <div class="flex items-center gap-3">
                                    <input type="number" id="preorderMaxDays" min="1" max="30" 
                                           class="w-24 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" />
                                    <span class="text-sm text-gray-600">days</span>
                                </div>
                            </div>
                            
                            <!-- Enable Preorder -->
                            <div class="pb-6 border-b border-gray-200">
                                <label class="block text-sm font-medium text-gray-700 mb-3">Enable Preorders</label>
                                <p class="text-xs text-gray-500 mb-3">Allow customers to place advance orders</p>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" id="enablePreorder" class="sr-only peer">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                    <span class="ml-3 text-sm text-gray-700">Enabled</span>
                                </label>
                            </div>
                            
                            <!-- Lunch Break -->
                            <div class="pb-6 border-b border-gray-200">
                                <label class="block text-sm font-medium text-gray-700 mb-3">Enable Lunch Break</label>
                                <p class="text-xs text-gray-500 mb-3">Pause order acceptance during lunch hours</p>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" id="enableLunchBreak" class="sr-only peer" onchange="toggleLunchBreakFields()">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                    <span class="ml-3 text-sm text-gray-700">Enabled</span>
                                </label>
                            </div>
                            
                            <!-- Lunch Break Times -->
                            <div id="lunchBreakTimes" class="pb-6 border-b border-gray-200 hidden">
                                <label class="block text-sm font-medium text-gray-700 mb-3">Lunch Break Times</label>
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-xs text-gray-600 mb-2">Start Time</label>
                                        <input type="time" id="lunchBreakStart" 
                                               class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" />
                                    </div>
                                    <div>
                                        <label class="block text-xs text-gray-600 mb-2">End Time</label>
                                        <input type="time" id="lunchBreakEnd" 
                                               class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" />
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex justify-end pt-2">
                                <button onclick="saveTimingSettings()" 
                                        class="px-6 py-2 bg-gray-900 hover:bg-gray-800 text-white text-sm font-medium rounded-lg transition-colors">
                                    Save Changes
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Working Hours Content -->
                <div id="settings-content-working-hours" class="settings-content hidden">
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 max-w-3xl">
                        <h3 class="text-lg font-semibold text-gray-900 mb-6">Operating Hours</h3>
                        
                        <div id="workingHoursForm" class="space-y-3" data-days-generated="false">
                            <!-- Days will be generated dynamically by JavaScript -->
                        </div>
                        
                        <div id="hoursUpdateMessage" class="mt-4"></div>
                    </div>
                </div>
                
                <!-- Special Dates Content -->
                <div id="settings-content-special-dates" class="settings-content hidden">
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 max-w-3xl">
                        <h3 class="text-lg font-semibold text-gray-900 mb-6">Special Dates & Holidays</h3>
                        
                        <form id="specialHourForm" class="space-y-4 mb-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Date</label>
                                <input type="date" id="specialDate" 
                                       class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required />
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Reason</label>
                                <input type="text" id="specialReason" placeholder="e.g., National Holiday, Maintenance" 
                                       class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required />
                            </div>
                            
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Opening Time</label>
                                    <input type="time" id="specialOpenTime" 
                                           class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" />
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Closing Time</label>
                                    <input type="time" id="specialCloseTime" 
                                           class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" />
                                </div>
                            </div>
                            
                            <div class="flex items-center gap-2">
                                <input type="checkbox" id="specialClosed" class="w-4 h-4 text-blue-600 rounded focus:ring-blue-500" />
                                <label for="specialClosed" class="text-sm text-gray-700">Mark as Closed Day</label>
                            </div>
                            
                            <div class="flex justify-end pt-2">
                                <button type="submit" 
                                        class="px-6 py-2 bg-gray-900 hover:bg-gray-800 text-white text-sm font-medium rounded-lg transition-colors">
                                    Add Special Date
                                </button>
                            </div>
                        </form>
                        
                        <div id="specialHoursList" class="space-y-2 max-h-96 overflow-y-auto border-t border-gray-200 pt-4">
                            <!-- Special hours will be listed here -->
                        </div>
                    </div>
                </div>
                
                <!-- Account Content -->
                <div id="settings-content-account" class="settings-content hidden">
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 max-w-3xl">
                        <h3 class="text-lg font-semibold text-gray-900 mb-6">Change Password</h3>
                        
                        <form id="passwordUpdateForm" class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Current Password</label>
                                <input type="password" id="currentPassword" 
                                       class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required />
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">New Password</label>
                                <input type="password" id="newPassword" 
                                       class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required />
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Confirm New Password</label>
                                <input type="password" id="confirmPassword" 
                                       class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required />
                            </div>
                            
                            <div class="flex justify-end pt-2">
                                <button type="submit" 
                                        class="px-6 py-2 bg-gray-900 hover:bg-gray-800 text-white text-sm font-medium rounded-lg transition-colors">
                                    Update Password
                                </button>
                            </div>
                        </form>

                        <div id="passwordUpdateMessage" class="mt-4 text-sm font-medium"></div>
                    </div>
                </div>
            </div>
            </div>

            <!-- Admin Management Tab -->
            <div id="content-admin-management" class="tab-content hidden p-6">
                <!-- Page Header -->
                <div class="mb-8">
                    <div class="flex items-center gap-2 text-sm text-gray-500 mb-2">
                        <i class="bi bi-house-door"></i>
                        <span>Dashboard</span>
                        <span>/</span>
                        <span class="text-gray-900 font-medium">Admin Management</span>
                    </div>
                    <h2 class="text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-700 bg-clip-text text-transparent mb-2 flex items-center gap-3">
                        <i class="bi bi-people-fill text-blue-600"></i>Admin Management Center
                    </h2>
                    <p class="text-gray-600">Manage administrator accounts and monitor activity</p>
                </div>
                
                <!-- Sub-Navigation Tabs -->
                <div class="glass-effect rounded-2xl shadow-md mb-6 border border-gray-100 overflow-hidden">
                    <div class="flex">
                        <button onclick="switchAdminTab('accounts')" id="admin-subtab-accounts" 
                                class="flex-1 px-6 py-4 font-bold text-blue-900 border-b-4 border-orange-500 bg-orange-50 transition-all duration-200 flex items-center justify-center gap-2">
                            <i class="bi bi-person-badge text-lg"></i>
                            <span>Admin Accounts</span>
                        </button>
                        <button onclick="switchAdminTab('logs')" id="admin-subtab-logs" 
                                class="flex-1 px-6 py-4 font-bold text-gray-500 border-b-4 border-transparent hover:bg-gray-50 transition-all duration-200 flex items-center justify-center gap-2">
                            <i class="bi bi-clock-history text-lg"></i>
                            <span>Activity Logs</span>
                        </button>
                    </div>
                </div>

                <!-- Admin Accounts Sub-Tab -->
                <div id="admin-content-accounts" class="admin-subtab-content">
                    <!-- Stats Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                        <div class="glass-effect rounded-2xl p-6 shadow-md border border-blue-100 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600 font-medium mb-1">Total Admins</p>
                                    <p class="text-4xl font-bold bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent" id="totalAdminsCount">0</p>
                                </div>
                                <div class="w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center shadow-lg">
                                    <i class="bi bi-people-fill text-white text-2xl"></i>
                                </div>
                            </div>
                        </div>
                        <div class="glass-effect rounded-2xl p-6 shadow-md border border-purple-100 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600 font-medium mb-1">Super Admins</p>
                                    <p class="text-4xl font-bold bg-gradient-to-r from-purple-600 to-purple-800 bg-clip-text text-transparent" id="superAdminsCount">0</p>
                                </div>
                                <div class="w-14 h-14 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg">
                                    <i class="bi bi-shield-fill-check text-white text-2xl"></i>
                                </div>
                            </div>
                        </div>
                        <div class="glass-effect rounded-2xl p-6 shadow-md border border-orange-100 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600 font-medium mb-1">Archived</p>
                                    <p class="text-4xl font-bold bg-gradient-to-r from-orange-500 to-orange-600 bg-clip-text text-transparent" id="archivedAdminsCount">0</p>
                                </div>
                                <div class="w-14 h-14 bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl flex items-center justify-center shadow-lg">
                                    <i class="bi bi-archive-fill text-white text-2xl"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Admin Accounts Table Card -->
                    <div class="glass-effect rounded-2xl shadow-md overflow-hidden border border-gray-100">
                        <!-- Header -->
                        <div class="p-6 bg-gradient-to-r from-blue-900 to-blue-700 flex flex-col md:flex-row items-start md:items-center justify-between gap-4">
                            <h3 class="text-xl font-bold text-white flex items-center gap-2" id="adminAccountsTableTitle">
                                <i class="bi bi-person-badge"></i>
                                <span>Admin Accounts</span>
                            </h3>
                            <button onclick="openCreateAdminModal()" 
                                    class="bg-orange-500 hover:bg-orange-600 text-white px-5 py-2.5 rounded-xl font-bold shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2">
                                <i class="bi bi-plus-circle-fill"></i>
                                <span>Add Admin</span>
                            </button>
                        </div>
                        
                        <!-- Search Bar and Actions -->
                        <div class="p-4 bg-gray-50 border-b border-gray-200">
                            <div class="flex flex-col md:flex-row gap-4 items-center">
                                <div class="flex-1 relative w-full">
                                    <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                        <i class="bi bi-search text-gray-400"></i>
                                    </div>
                                    <input type="text" id="searchAdmins" 
                                           placeholder="Search by name, username, or email..." 
                                           oninput="searchAdmins()" 
                                           class="w-full pl-11 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all" />
                                </div>
                                <button onclick="toggleArchivedAdminsView()" id="viewArchivedAdminsBtn" 
                                        class="bg-gray-600 hover:bg-gray-700 text-white px-5 py-3 rounded-xl font-bold whitespace-nowrap shadow-md hover:shadow-lg transition-all flex items-center gap-2">
                                    <i class="bi bi-archive"></i>
                                    <span>View Archived</span>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Admins Table -->
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-gray-50 border-b-2 border-gray-200">
                                    <tr>
                                        <th class="px-6 py-4 text-left text-xs font-bold text-blue-900 uppercase tracking-wider">
                                            <i class="bi bi-person mr-1"></i>Admin
                                        </th>
                                        <th class="px-6 py-4 text-left text-xs font-bold text-blue-900 uppercase tracking-wider">
                                            <i class="bi bi-envelope mr-1"></i>Contact
                                        </th>
                                        <th class="px-6 py-4 text-left text-xs font-bold text-blue-900 uppercase tracking-wider">
                                            <i class="bi bi-shield mr-1"></i>Role
                                        </th>
                                        <th class="px-6 py-4 text-left text-xs font-bold text-blue-900 uppercase tracking-wider">
                                            <i class="bi bi-circle-fill mr-1" style="font-size: 8px;"></i>Status
                                        </th>
                                        <th class="px-6 py-4 text-center text-xs font-bold text-blue-900 uppercase tracking-wider">
                                            <i class="bi bi-gear mr-1"></i>Actions
                                        </th>
                                    </tr>
                                </thead>
                                <tbody id="adminAccountsTableBody" class="divide-y divide-gray-100 bg-white">
                                    <!-- Table rows will be populated by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                        
                        <!-- Empty State -->
                        <div id="adminEmptyState" class="hidden p-12 text-center bg-gray-50">
                            <div class="w-20 h-20 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i class="bi bi-person-x text-4xl text-gray-400"></i>
                            </div>
                            <p class="text-gray-600 text-lg font-semibold mb-1">No admins found</p>
                            <p class="text-gray-400 text-sm">Try adjusting your search criteria</p>
                        </div>
                    </div>
                </div>

                <!-- Activity Logs Sub-Tab -->
                <div id="admin-content-logs" class="admin-subtab-content hidden">
                    <!-- Logs Stats -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
                        <div class="glass-effect rounded-2xl p-6 shadow-md border border-blue-100 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600 font-medium mb-1">Total Activities</p>
                                    <p class="text-3xl font-bold bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent" id="totalLogsCount">0</p>
                                </div>
                                <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-md">
                                    <i class="bi bi-list-ul text-white text-xl"></i>
                                </div>
                            </div>
                        </div>
                        <div class="glass-effect rounded-2xl p-6 shadow-md border border-green-100 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600 font-medium mb-1">Today's Actions</p>
                                    <p class="text-3xl font-bold bg-gradient-to-r from-green-600 to-green-700 bg-clip-text text-transparent" id="todayLogsCount">0</p>
                                </div>
                                <div class="w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center shadow-md">
                                    <i class="bi bi-calendar-check text-white text-xl"></i>
                                </div>
                            </div>
                        </div>
                        <div class="glass-effect rounded-2xl p-6 shadow-md border border-purple-100 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600 font-medium mb-1">Active Admins</p>
                                    <p class="text-3xl font-bold bg-gradient-to-r from-purple-600 to-purple-700 bg-clip-text text-transparent" id="activeAdminsLogsCount">0</p>
                                </div>
                                <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center shadow-md">
                                    <i class="bi bi-person-check text-white text-xl"></i>
                                </div>
                            </div>
                        </div>
                        <div class="glass-effect rounded-2xl p-6 shadow-md border border-orange-100 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600 font-medium mb-1">Action Types</p>
                                    <p class="text-3xl font-bold bg-gradient-to-r from-orange-500 to-orange-600 bg-clip-text text-transparent" id="actionTypesCount">0</p>
                                </div>
                                <div class="w-12 h-12 bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl flex items-center justify-center shadow-md">
                                    <i class="bi bi-lightning-charge text-white text-xl"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Filters -->
                    <div class="glass-effect rounded-2xl shadow-md p-6 mb-6 border border-gray-100">
                        <h3 class="text-lg font-bold text-blue-900 mb-4 flex items-center gap-2">
                            <i class="bi bi-funnel"></i>Filter Activity Logs
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                            <div>
                                <label class="block font-semibold mb-2 text-gray-700 text-sm flex items-center gap-1">
                                    <i class="bi bi-person text-blue-600"></i>Admin
                                </label>
                                <select id="filterLogAdmin" onchange="fetchAdminLogs()" 
                                        class="w-full border-2 border-gray-200 rounded-xl p-3 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all">
                                    <option value="all">All Admins</option>
                                </select>
                            </div>
                            <div>
                                <label class="block font-semibold mb-2 text-gray-700 text-sm flex items-center gap-1">
                                    <i class="bi bi-lightning text-orange-500"></i>Action Type
                                </label>
                                <select id="filterLogAction" onchange="fetchAdminLogs()" 
                                        class="w-full border-2 border-gray-200 rounded-xl p-3 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all">
                                    <option value="all">All Actions</option>
                                    <optgroup label="Admin Actions">
                                        <option value="admin_create">Admin Created</option>
                                        <option value="admin_update">Admin Updated</option>
                                        <option value="admin_archive">Admin Archived</option>
                                        <option value="admin_restore">Admin Restored</option>
                                        <option value="admin_delete">Admin Deleted</option>
                                    </optgroup>
                                    <optgroup label="Student Actions">
                                        <option value="student_update">Student Updated</option>
                                        <option value="student_archive">Student Archived</option>
                                        <option value="student_restore">Student Restored</option>
                                    </optgroup>
                                    <optgroup label="Other Actions">
                                        <option value="order_status_update">Order Status Update</option>
                                        <option value="email_archive">Email Archived</option>
                                        <option value="email_restore">Email Restored</option>
                                        <option value="inventory_update">Inventory Update</option>
                                    </optgroup>
                                </select>
                            </div>
                            <div>
                                <label class="block font-semibold mb-2 text-gray-700 text-sm flex items-center gap-1">
                                    <i class="bi bi-calendar3 text-green-600"></i>Date
                                </label>
                                <input type="date" id="filterLogDate" onchange="fetchAdminLogs()" 
                                       class="w-full border-2 border-gray-200 rounded-xl p-3 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all" />
                            </div>
                            <div>
                                <label class="block font-semibold mb-2 text-gray-700 text-sm flex items-center gap-1">
                                    <i class="bi bi-search text-purple-600"></i>Search
                                </label>
                                <input type="text" id="searchLogs" placeholder="Search logs..." 
                                       onkeyup="fetchAdminLogs()" 
                                       class="w-full border-2 border-gray-200 rounded-xl p-3 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all" />
                            </div>
                        </div>
                        <div class="mt-4 flex flex-wrap gap-3">
                            <button onclick="fetchAdminLogs()" 
                                    class="bg-blue-600 hover:bg-blue-700 text-white px-5 py-2.5 rounded-xl font-bold shadow-md hover:shadow-lg transition-all flex items-center gap-2">
                                <i class="bi bi-arrow-clockwise"></i>Refresh
                            </button>
                            <button onclick="resetLogFilters()" 
                                    class="bg-gray-500 hover:bg-gray-600 text-white px-5 py-2.5 rounded-xl font-bold shadow-md hover:shadow-lg transition-all flex items-center gap-2">
                                <i class="bi bi-x-circle"></i>Reset
                            </button>
                            <button onclick="enterAdminLogExportMode()" id="startAdminLogExportBtn"
                                    class="bg-green-600 hover:bg-green-700 text-white px-5 py-2.5 rounded-xl font-bold shadow-md hover:shadow-lg transition-all flex items-center gap-2">
                                <i class="bi bi-file-earmark-spreadsheet"></i>Export
                            </button>
                        </div>
                        <div id="adminLogActions" class="hidden mt-4 flex flex-wrap gap-2">
                            <button onclick="exportAllAdminLogs()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-xl font-bold text-sm flex items-center gap-2">
                                <i class="bi bi-file-earmark-spreadsheet"></i>Export All
                            </button>
                            <button onclick="exportSelectedAdminLogs()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl font-bold text-sm flex items-center gap-2">
                                <i class="bi bi-check2-square"></i>Export Selected (<span id="selectedAdminLogCount">0</span>)
                            </button>
                            <button onclick="exitAdminLogExportMode()" class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-xl font-bold text-sm flex items-center gap-2">
                                <i class="bi bi-x-lg"></i>Cancel
                            </button>
                        </div>
                    </div>

                    <!-- Logs Table -->
                    <div class="glass-effect rounded-2xl shadow-md overflow-hidden border border-gray-100">
                        <div class="p-6 bg-gray-50 border-b border-gray-200">
                            <h3 class="text-xl font-semibold text-blue-900 flex items-center gap-2">
                                <i class="bi bi-clock-history"></i>Activity Timeline
                            </h3>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-gray-50 border-b-2 border-gray-200">
                                    <tr>
                                        <th class="px-6 py-4 text-left admin-log-checkbox-column hidden">
                                            <input type="checkbox" id="selectAllAdminLogs" onchange="toggleSelectAllAdminLogs()" class="w-4 h-4 rounded">
                                        </th>
                                        <th class="px-6 py-4 text-left text-xs font-bold text-blue-900 uppercase tracking-wider">
                                            <i class="bi bi-clock mr-1"></i>Time
                                        </th>
                                        <th class="px-6 py-4 text-left text-xs font-bold text-blue-900 uppercase tracking-wider">
                                            <i class="bi bi-person mr-1"></i>Admin
                                        </th>
                                        <th class="px-6 py-4 text-left text-xs font-bold text-blue-900 uppercase tracking-wider">
                                            <i class="bi bi-lightning mr-1"></i>Action
                                        </th>
                                        <th class="px-6 py-4 text-left text-xs font-bold text-blue-900 uppercase tracking-wider">
                                            <i class="bi bi-info-circle mr-1"></i>Description
                                        </th>
                                        <th class="px-6 py-4 text-left text-xs font-bold text-blue-900 uppercase tracking-wider">
                                            <i class="bi bi-hdd-network mr-1"></i>IP Address
                                        </th>
                                    </tr>
                                </thead>
                                <tbody id="adminLogsTableBody" class="divide-y divide-gray-100 bg-white">
                                    <tr>
                                        <td colspan="6" class="px-6 py-12 text-center text-gray-500">
                                            <i class="bi bi-arrow-repeat animate-spin text-3xl mb-3 block text-blue-500"></i>
                                            <p>Loading activity logs...</p>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Create Admin Modal -->
            <div id="createAdminModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
                <div class="bg-white rounded-3xl shadow-2xl max-w-2xl w-full mx-4 overflow-hidden animate-fade-in">
                    <!-- Modal Header -->
                    <div class="bg-gradient-to-r from-blue-900 to-blue-700 text-white px-8 py-6">
                        <div class="flex justify-between items-center">
                            <h3 class="text-2xl font-bold flex items-center gap-3">
                                <div class="w-10 h-10 bg-white bg-opacity-20 rounded-xl flex items-center justify-center">
                                    <i class="bi bi-person-plus-fill text-xl"></i>
                                </div>
                                Create New Admin
                            </h3>
                            <button onclick="closeCreateAdminModal()" class="text-white hover:bg-white hover:bg-opacity-20 p-2 rounded-xl transition-all">
                                <i class="bi bi-x-lg text-xl"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Modal Body -->
                    <div class="p-8">
                        <form id="createAdminForm" class="space-y-5">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                                <!-- Full Name -->
                                <div>
                                    <label class="block font-semibold mb-2 text-gray-700 flex items-center gap-2">
                                        <i class="bi bi-person text-blue-600"></i>
                                        Full Name <span class="text-red-500">*</span>
                                    </label>
                                    <input type="text" id="newAdminFullName" required 
                                           class="w-full border-2 border-gray-200 rounded-xl p-3 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all" 
                                           placeholder="John Doe" />
                                </div>
                                
                                <!-- Username -->
                                <div>
                                    <label class="block font-semibold mb-2 text-gray-700 flex items-center gap-2">
                                        <i class="bi bi-at text-blue-600"></i>
                                        Username <span class="text-red-500">*</span>
                                    </label>
                                    <input type="text" id="newAdminUsername" required 
                                           class="w-full border-2 border-gray-200 rounded-xl p-3 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all" 
                                           placeholder="johndoe" />
                                </div>
                                
                                <!-- Email -->
                                <div>
                                    <label class="block font-semibold mb-2 text-gray-700 flex items-center gap-2">
                                        <i class="bi bi-envelope text-blue-600"></i>
                                        Email <span class="text-red-500">*</span>
                                    </label>
                                    <input type="email" id="newAdminEmail" required 
                                           class="w-full border-2 border-gray-200 rounded-xl p-3 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all" 
                                           placeholder="admin@example.com" />
                                </div>
                                
                                <!-- Password -->
                                <div>
                                    <label class="block font-semibold mb-2 text-gray-700 flex items-center gap-2">
                                        <i class="bi bi-lock text-blue-600"></i>
                                        Password <span class="text-red-500">*</span>
                                    </label>
                                    <input type="password" id="newAdminPassword" required minlength="8" 
                                           class="w-full border-2 border-gray-200 rounded-xl p-3 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all" 
                                           placeholder="" />
                                    <p class="text-xs text-gray-500 mt-1">Minimum 8 characters</p>
                                </div>
                            </div>
                            
                            <!-- Super Admin Checkbox -->
                            <div class="mt-6">
                                <label class="flex items-start gap-3 p-4 border-2 border-gray-200 rounded-xl cursor-pointer hover:bg-purple-50 hover:border-purple-300 transition-all">
                                    <input type="checkbox" id="newAdminSuperAdmin" class="w-5 h-5 text-purple-600 mt-0.5 rounded" />
                                    <div class="flex-1">
                                        <span class="font-bold text-gray-800 flex items-center gap-2">
                                            <i class="bi bi-shield-fill-check text-purple-600"></i>
                                            Grant Super Admin Privileges
                                        </span>
                                        <p class="text-sm text-gray-600 mt-1">Full access to all admin features including logs, admin management, and system settings</p>
                                    </div>
                                </label>
                            </div>
                            
                            <!-- Action Buttons -->
                            <div class="flex gap-3 pt-4">
                                <button type="submit" 
                                        class="flex-1 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white px-6 py-3.5 rounded-xl font-bold shadow-lg hover:shadow-xl transition-all flex items-center justify-center gap-2">
                                    <i class="bi bi-check-circle-fill"></i>
                                    Create Admin Account
                                </button>
                                <button type="button" onclick="closeCreateAdminModal()" 
                                        class="px-6 py-3.5 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-bold transition-all">
                                    Cancel
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Edit Admin Modal -->
            <div id="editAdminModal" class="fixed inset-0 bg-black/60 backdrop-blur-sm hidden items-center justify-center z-50">
                <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 overflow-hidden transform transition-all">
                    <!-- Modal Header -->
                    <div class="bg-gradient-to-r from-blue-600 to-blue-800 px-6 py-5">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 rounded-xl bg-white/20 flex items-center justify-center">
                                <i class="bi bi-pencil-square text-white text-xl"></i>
                            </div>
                            <h3 class="text-xl font-bold text-white">Edit Admin Account</h3>
                        </div>
                    </div>
                    
                    <!-- Modal Body -->
                    <form id="editAdminForm" class="p-6 space-y-5">
                        <input type="hidden" id="editAdminId" />
                        
                        <div>
                            <label class="flex items-center gap-2 text-sm font-semibold text-gray-700 mb-2">
                                <i class="bi bi-person text-blue-600"></i> Full Name
                            </label>
                            <input type="text" id="editAdminFullName" required 
                                class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all outline-none" />
                        </div>
                        
                        <div>
                            <label class="flex items-center gap-2 text-sm font-semibold text-gray-700 mb-2">
                                <i class="bi bi-badge-id text-blue-600"></i> Username
                            </label>
                            <input type="text" id="editAdminUsername" required 
                                class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all outline-none" />
                        </div>
                        
                        <div>
                            <label class="flex items-center gap-2 text-sm font-semibold text-gray-700 mb-2">
                                <i class="bi bi-envelope text-blue-600"></i> Email
                            </label>
                            <input type="email" id="editAdminEmail" required 
                                class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all outline-none" />
                        </div>
                        
                        <div>
                            <label class="flex items-center gap-2 text-sm font-semibold text-gray-700 mb-2">
                                <i class="bi bi-shield-lock text-blue-600"></i> New Password
                                <span class="text-xs text-gray-400 font-normal">(leave blank to keep current)</span>
                            </label>
                            <input type="password" id="editAdminPassword" minlength="8" 
                                class="w-full border-2 border-gray-200 rounded-xl px-4 py-3 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all outline-none" />
                        </div>
                        
                        <div class="bg-amber-50 border-2 border-amber-200 rounded-xl p-4">
                            <label class="flex items-center gap-3 cursor-pointer">
                                <input type="checkbox" id="editAdminSuperAdmin" 
                                    class="w-5 h-5 rounded border-2 border-amber-400 text-amber-600 focus:ring-amber-500" />
                                <div class="flex items-center gap-2">
                                    <i class="bi bi-star-fill text-amber-500"></i>
                                    <span class="font-bold text-amber-800">Super Admin</span>
                                </div>
                            </label>
                            <p class="text-xs text-amber-600 mt-2 ml-8">Grant full system access and permissions</p>
                        </div>
                        
                        <!-- Message Display -->
                        <div id="editAdminMessage" class="hidden text-sm font-medium p-3 rounded-xl"></div>
                        
                        <!-- Action Buttons -->
                        <div class="flex gap-3 pt-2">
                            <button type="submit" 
                                class="flex-1 flex items-center justify-center gap-2 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-6 py-3.5 rounded-xl font-bold shadow-lg shadow-blue-500/30 transition-all">
                                <i class="bi bi-check-circle"></i> Update Admin
                            </button>
                            <button type="button" onclick="closeEditModal()" 
                                class="px-6 py-3.5 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-bold transition-all">
                                Cancel
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Student Details Modal -->
            <div id="studentDetailsModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
                <div class="bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex justify-between items-center">
                            <h3 class="text-2xl font-bold text-blue-900" id="studentModalTitle">Student Details</h3>
                            <button onclick="closeStudentModal()" class="text-gray-500 hover:text-gray-700">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
                            </button>
                        </div>
                        
                        <!-- Tabs -->
                        <div class="flex gap-2 mt-4">
                            <button onclick="switchStudentTab('current')" id="student-tab-current" class="px-4 py-2 rounded font-bold bg-blue-900 text-white">
                                Current Order
                            </button>
                            <button onclick="switchStudentTab('info')" id="student-tab-info" class="px-4 py-2 rounded font-bold bg-gray-200 text-gray-700 hover:bg-gray-300">
                                Student Info
                            </button>
                            <button onclick="switchStudentTab('breakdown')" id="student-tab-breakdown" class="px-4 py-2 rounded font-bold bg-gray-200 text-gray-700 hover:bg-gray-300">
                                Order Breakdown
                            </button>
                            <button onclick="switchStudentTab('history')" id="student-tab-history" class="px-4 py-2 rounded font-bold bg-gray-200 text-gray-700 hover:bg-gray-300">
                                Order History
                            </button>
                        </div>
                    </div>
                    
                    <div class="p-6 overflow-y-auto" style="max-height: calc(90vh - 200px);">
                        <!-- Current Order Tab -->
                        <div id="student-content-current" class="student-tab-content">
                            <div id="studentCurrentOrder"></div>
                        </div>
                        
                        <!-- Student Info Tab -->
                        <div id="student-content-info" class="student-tab-content hidden">
                            <div id="studentInfoContent"></div>
                        </div>
                        
                        <!-- Order Breakdown Tab -->
                        <div id="student-content-breakdown" class="student-tab-content hidden">
                            <div id="studentOrderBreakdown"></div>
                        </div>
                        
                        <!-- Order History Tab -->
                        <div id="student-content-history" class="student-tab-content hidden">
                            <div id="studentOrderHistory"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="content-queue-history" class="tab-content hidden p-8">
                <!-- Page Header -->
                <div class="mb-8">
                    <h2 class="text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-700 bg-clip-text text-transparent mb-2">Queue History</h2>
                    <p class="text-gray-600">View and analyze past order records</p>
                </div>
                
                <div class="glass-effect rounded-2xl shadow-md p-6 mb-6 border border-gray-100">
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <div>
                            <label for="filterHistoryDate" class="block text-sm font-semibold text-gray-700 mb-2">Filter by Date</label>
                            <input type="date" id="filterHistoryDate" onchange="fetchHistory()" class="border border-gray-200 rounded-xl p-3 w-full focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all">
                        </div>
                        <div>
                            <label for="filterHistoryStatus" class="block text-sm font-semibold text-gray-700 mb-2">Filter by Status</label>
                            <select id="filterHistoryStatus" onchange="fetchHistory()" class="border border-gray-200 rounded-xl p-3 w-full focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all">
                                <option value="all">All Statuses</option>
                                <option value="pending">Pending</option>
                                <option value="processing">Processing</option>
                                <option value="ready">Ready</option>
                                <option value="completed">Completed</option>
                                <option value="cancelled">Cancelled</option>
                            </select>
                        </div>
                        <div>
                            <label for="searchHistory" class="block text-sm font-semibold text-gray-700 mb-2">Search</label>
                            <input type="text" id="searchHistory" placeholder="Student ID, Queue #" 
                                   onkeyup="fetchHistory()" class="border border-gray-200 rounded-xl p-3 w-full focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all" />
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-transparent mb-2">Actions</label>
                            <button onclick="resetHistoryFilters()" class="bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white px-4 py-3 rounded-xl font-semibold w-full shadow-md hover:shadow-lg transition-all duration-300 transform hover:-translate-y-0.5">
                                Reset Filters
                            </button>
                        </div>
                    </div>
                </div>

                <div class="glass-effect rounded-2xl shadow-md overflow-hidden border border-gray-100">
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gradient-to-r from-gray-50 to-blue-50">
                                <tr>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Queue ID</th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Student</th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Type</th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Item</th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Date Placed</th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Status</th>
                                </tr>
                            </thead>
                            <tbody id="historyTableBody" class="divide-y divide-gray-100 bg-white">
                                </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div id="content-analytics" class="tab-content hidden p-8">
                <!-- Page Header -->
                <div class="mb-8">
                    <h2 class="text-3xl font-bold bg-gradient-to-r from-blue-900 to-blue-700 bg-clip-text text-transparent mb-2 flex items-center gap-2">
                        <i class="bi bi-graph-up-arrow"></i>Order Analytics Dashboard
                    </h2>
                    <p class="text-gray-600">Visualize trends and monitor performance metrics</p>
                </div>
                
                <!-- Advanced Filter Bar -->
                <div class="glass-effect rounded-2xl shadow-md p-6 mb-6 border border-gray-100">
                    <div class="flex flex-col gap-4">
                        <!-- Filter Header -->
                        <div class="flex items-center justify-between">
                            <h3 class="text-lg font-semibold text-gray-800 flex items-center gap-2">
                                <i class="bi bi-funnel text-blue-600"></i>
                                Filter Analytics
                            </h3>
                            <div class="text-sm text-gray-500">
                                <i class="bi bi-clock-history mr-1"></i>
                                <span id="analyticsUpdateTime">Last updated: --:--:--</span>
                            </div>
                        </div>
                        
                        <!-- Filter Row 1: Date Presets & Custom Range -->
                        <div class="flex flex-wrap gap-3 items-center">
                            <!-- Date Preset Buttons -->
                            <div class="flex gap-2">
                                <button onclick="setAnalyticsPeriod('daily')" id="periodToday" 
                                        class="analytics-period-btn active px-4 py-2 rounded-xl text-sm font-medium border-2 border-blue-600 bg-blue-600 text-white transition-all">
                                    <i class="bi bi-calendar-day mr-1"></i>Today
                                </button>
                                <button onclick="setAnalyticsPeriod('weekly')" id="periodWeek" 
                                        class="analytics-period-btn px-4 py-2 rounded-xl text-sm font-medium border-2 border-gray-300 text-gray-600 hover:border-blue-600 hover:text-blue-600 transition-all">
                                    <i class="bi bi-calendar-week mr-1"></i>This Week
                                </button>
                                <button onclick="setAnalyticsPeriod('monthly')" id="periodMonth" 
                                        class="analytics-period-btn px-4 py-2 rounded-xl text-sm font-medium border-2 border-gray-300 text-gray-600 hover:border-blue-600 hover:text-blue-600 transition-all">
                                    <i class="bi bi-calendar-month mr-1"></i>This Month
                                </button>
                                <button onclick="setAnalyticsPeriod('yearly')" id="periodYear" 
                                        class="analytics-period-btn px-4 py-2 rounded-xl text-sm font-medium border-2 border-gray-300 text-gray-600 hover:border-blue-600 hover:text-blue-600 transition-all">
                                    <i class="bi bi-calendar3 mr-1"></i>This Year
                                </button>
                            </div>
                            
                            <!-- Custom Date Range -->
                            <div class="flex gap-2 items-center border-l border-gray-300 pl-4">
                                <span class="text-sm text-gray-500">Custom:</span>
                                <input type="date" id="analyticsStartDate" 
                                       class="px-3 py-2 border border-gray-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all">
                                <span class="text-gray-400">to</span>
                                <input type="date" id="analyticsEndDate" 
                                       class="px-3 py-2 border border-gray-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all">
                            </div>
                        </div>
                        
                        <!-- Filter Row 2: Advanced Filters -->
                        <div class="flex flex-wrap gap-3 items-center">
                            <!-- College Filter -->
                            <div class="flex items-center gap-2">
                                <label class="text-sm text-gray-600">
                                    <i class="bi bi-building mr-1"></i>College:
                                </label>
                                <select id="analyticsCollege" 
                                        class="px-3 py-2 border border-gray-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all min-w-[150px]">
                                    <option value="">All Colleges</option>
                                </select>
                            </div>
                            
                            <!-- Program Filter -->
                            <div class="flex items-center gap-2">
                                <label class="text-sm text-gray-600">
                                    <i class="bi bi-mortarboard mr-1"></i>Program:
                                </label>
                                <select id="analyticsProgram" 
                                        class="px-3 py-2 border border-gray-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all min-w-[150px]">
                                    <option value="">All Programs</option>
                                </select>
                            </div>
                            
                            <!-- Item Filter -->
                            <div class="flex items-center gap-2">
                                <label class="text-sm text-gray-600">
                                    <i class="bi bi-box mr-1"></i>Item:
                                </label>
                                <input type="text" id="analyticsItemFilter" placeholder="Search items..." 
                                       class="px-3 py-2 border border-gray-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all w-40">
                            </div>
                            
                            <!-- Student ID Filter -->
                            <div class="flex items-center gap-2">
                                <label class="text-sm text-gray-600">
                                    <i class="bi bi-person-badge mr-1"></i>Student ID:
                                </label>
                                <input type="text" id="analyticsStudentId" placeholder="Enter ID..." 
                                       class="px-3 py-2 border border-gray-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all w-36">
                            </div>
                            
                            <!-- Apply & Clear Buttons -->
                            <div class="flex gap-2 ml-auto">
                                <button onclick="applyAnalyticsFilters()" 
                                        class="bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-5 py-2 rounded-xl text-sm font-semibold shadow-md hover:shadow-lg transition-all duration-300 flex items-center gap-2">
                                    <i class="bi bi-search"></i>Apply Filters
                                </button>
                                <button onclick="clearAnalyticsFilters()" 
                                        class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-xl text-sm font-medium transition-all duration-300 flex items-center gap-2">
                                    <i class="bi bi-x-lg"></i>Clear
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Stats Cards -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                    <div class="bg-white rounded-xl shadow-md p-6 border border-gray-100 hover:shadow-lg transition-shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-500 text-sm font-medium">Total Orders</p>
                                <p class="text-3xl font-bold text-blue-600" id="analyticsTotalOrders">0</p>
                            </div>
                            <div class="w-14 h-14 bg-blue-100 rounded-xl flex items-center justify-center">
                                <i class="bi bi-box-seam text-2xl text-blue-600"></i>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl shadow-md p-6 border border-gray-100 hover:shadow-lg transition-shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-500 text-sm font-medium">Pending</p>
                                <p class="text-3xl font-bold text-yellow-600" id="analyticsPendingOrders">0</p>
                            </div>
                            <div class="w-14 h-14 bg-yellow-100 rounded-xl flex items-center justify-center">
                                <i class="bi bi-hourglass-split text-2xl text-yellow-600"></i>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl shadow-md p-6 border border-gray-100 hover:shadow-lg transition-shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-500 text-sm font-medium">Completed</p>
                                <p class="text-3xl font-bold text-green-600" id="analyticsCompletedOrders">0</p>
                            </div>
                            <div class="w-14 h-14 bg-green-100 rounded-xl flex items-center justify-center">
                                <i class="bi bi-check-circle text-2xl text-green-600"></i>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl shadow-md p-6 border border-gray-100 hover:shadow-lg transition-shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-500 text-sm font-medium">Avg Wait Time</p>
                                <p class="text-3xl font-bold text-teal-600" id="analyticsAvgWaitTime">0m</p>
                            </div>
                            <div class="w-14 h-14 bg-teal-100 rounded-xl flex items-center justify-center">
                                <i class="bi bi-stopwatch text-2xl text-teal-600"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Charts Grid -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                    <!-- Orders Over Time (Line Chart) -->
                    <div class="bg-white rounded-xl shadow-md p-6 border border-gray-100">
                        <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
                            <i class="bi bi-graph-up text-blue-600"></i>Orders Over Time
                        </h2>
                        <div style="position: relative; height: 300px;">
                            <canvas id="analyticsOrdersTimeChart"></canvas>
                        </div>
                    </div>

                    <!-- Order Status Distribution (Pie Chart) -->
                    <div class="bg-white rounded-xl shadow-md p-6 border border-gray-100">
                        <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
                            <i class="bi bi-pie-chart text-blue-600"></i>Status Distribution
                        </h2>
                        <div style="position: relative; height: 300px;">
                            <canvas id="analyticsStatusPieChart"></canvas>
                        </div>
                    </div>

                    <!-- Items Demand (Bar Chart) -->
                    <div class="bg-white rounded-xl shadow-md p-6 border border-gray-100">
                        <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
                            <i class="bi bi-bar-chart text-blue-600"></i>Popular Items
                        </h2>
                        <div style="position: relative; height: 300px;">
                            <canvas id="analyticsItemsBarChart"></canvas>
                        </div>
                    </div>

                    <!-- Hourly Activity (Animated Bar Chart) -->
                    <div class="bg-white rounded-xl shadow-md p-6 border border-gray-100">
                        <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
                            <i class="bi bi-clock-history text-blue-600"></i>Hourly Activity
                        </h2>
                        <div style="position: relative; height: 300px;">
                            <canvas id="analyticsHourlyChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity Feed -->
                <div class="bg-white rounded-xl shadow-md p-6 border border-gray-100">
                    <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
                        <i class="bi bi-list-task text-blue-600"></i>Recent Activity
                    </h2>
                    <div id="analyticsActivityFeed" class="space-y-2 max-h-64 overflow-y-auto scroll-smooth">
                        <p class="text-gray-500 text-sm">Loading activity...</p>
                    </div>
                </div>
            </div>
            
            <!-- Phase 8: Services Management Tab -->
            <div id="content-services" class="tab-content hidden p-8">
                <!-- Page Header -->
                <div class="mb-8">
                    <div class="flex items-center gap-2 text-sm text-gray-500 mb-2">
                        <i class="bi bi-speedometer2"></i>
                        <span>Dashboard</span>
                        <span>/</span>
                        <span class="text-gray-900 font-medium">Services Management</span>
                    </div>
                    <div>
                        <h2 class="text-2xl font-bold text-gray-900 mb-1 flex items-center gap-3">
                            <i class="bi bi-toggles2 text-blue-600" style="font-size: 28px;"></i>
                            Services Management
                        </h2>
                        <p class="text-gray-600 text-sm">Enable or disable services for students</p>
                    </div>
                </div>

                <!-- Services Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="servicesGrid">
                    <!-- Services will be loaded here dynamically -->
                    <div class="col-span-full text-center py-12">
                        <i class="bi bi-hourglass-split text-4xl text-gray-400 mb-3"></i>
                        <p class="text-gray-500">Loading services...</p>
                    </div>
                </div>
            </div>
            
            <!-- Security Dashboard Tab -->
            <div id="content-security" class="tab-content hidden p-8">
                <!-- Page Header -->
                <div class="mb-8">
                    <div class="flex items-center gap-2 text-sm text-gray-500 mb-2">
                        <i class="bi bi-speedometer2"></i>
                        <span>Dashboard</span>
                        <span>/</span>
                        <span class="text-gray-900 font-medium">Security</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-900 mb-1 flex items-center gap-3">
                                <i class="bi bi-shield-check text-blue-600" style="font-size: 28px;"></i>
                                Security Dashboard
                            </h2>
                            <p class="text-gray-600 text-sm">Monitor and manage brute force protection</p>
                        </div>
                        <button onclick="refreshSecurityDashboard()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-xl font-medium transition-all duration-200 flex items-center gap-2">
                            <i class="bi bi-arrow-clockwise"></i>
                            Refresh
                        </button>
                    </div>
                </div>

                <!-- Statistics Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
                    <!-- Locked Accounts -->
                    <div class="bg-white rounded-xl shadow-md border border-gray-100 p-6 hover:shadow-lg transition-shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-500 text-sm font-medium">Locked Accounts</p>
                                <p class="text-3xl font-bold text-gray-900 mt-2" id="stat-locked-accounts">0</p>
                            </div>
                            <div class="w-14 h-14 bg-red-100 rounded-xl flex items-center justify-center">
                                <i class="bi bi-lock-fill text-2xl text-red-600"></i>
                            </div>
                        </div>
                    </div>

                    <!-- Blacklisted IPs -->
                    <div class="bg-white rounded-xl shadow-md border border-gray-100 p-6 hover:shadow-lg transition-shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-500 text-sm font-medium">Blacklisted IPs</p>
                                <p class="text-3xl font-bold text-gray-900 mt-2" id="stat-blacklisted-ips">0</p>
                            </div>
                            <div class="w-14 h-14 bg-orange-100 rounded-xl flex items-center justify-center">
                                <i class="bi bi-slash-circle text-2xl text-orange-600"></i>
                            </div>
                        </div>
                    </div>

                    <!-- Failed Logins Today -->
                    <div class="bg-white rounded-xl shadow-md border border-gray-100 p-6 hover:shadow-lg transition-shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-500 text-sm font-medium">Failed Logins Today</p>
                                <p class="text-3xl font-bold text-gray-900 mt-2" id="stat-failed-today">0</p>
                            </div>
                            <div class="w-14 h-14 bg-yellow-100 rounded-xl flex items-center justify-center">
                                <i class="bi bi-exclamation-triangle text-2xl text-yellow-600"></i>
                            </div>
                        </div>
                    </div>

                    <!-- Critical Events (24h) -->
                    <div class="bg-white rounded-xl shadow-md border border-gray-100 p-6 hover:shadow-lg transition-shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-500 text-sm font-medium">Critical Events (24h)</p>
                                <p class="text-3xl font-bold text-gray-900 mt-2" id="stat-critical-events">0</p>
                            </div>
                            <div class="w-14 h-14 bg-purple-100 rounded-xl flex items-center justify-center">
                                <i class="bi bi-lightning-charge text-2xl text-purple-600"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Security Tabs -->
                <div class="bg-white rounded-xl shadow-md border border-gray-100 mb-6">
                    <div class="border-b border-gray-200">
                        <nav class="flex -mb-px">
                            <button onclick="showSecurityTab('locked-accounts')" id="sectab-locked-accounts" class="security-tab active px-6 py-3 border-b-2 border-blue-600 text-blue-600 font-medium flex items-center gap-2">
                                <i class="bi bi-lock"></i>
                                Locked Accounts
                            </button>
                            <button onclick="showSecurityTab('security-logs')" id="sectab-security-logs" class="security-tab px-6 py-3 border-b-2 border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300 flex items-center gap-2">
                                <i class="bi bi-journal-text"></i>
                                Security Logs
                            </button>
                            <button onclick="showSecurityTab('ip-blacklist')" id="sectab-ip-blacklist" class="security-tab px-6 py-3 border-b-2 border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300 flex items-center gap-2">
                                <i class="bi bi-slash-circle"></i>
                                IP Blacklist
                            </button>
                            <button onclick="showSecurityTab('sec-analytics')" id="sectab-sec-analytics" class="security-tab px-6 py-3 border-b-2 border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300 flex items-center gap-2">
                                <i class="bi bi-bar-chart"></i>
                                Analytics
                            </button>
                        </nav>
                    </div>

                    <!-- Tab Content -->
                    <div class="p-6">
                        <!-- Locked Accounts Tab -->
                        <div id="seccontent-locked-accounts" class="security-tab-content">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-xl font-bold text-gray-900">Currently Locked Accounts</h3>
                                <button onclick="loadLockedAccounts()" class="text-blue-600 hover:text-blue-700 flex items-center gap-1">
                                    <i class="bi bi-arrow-clockwise"></i>
                                    Refresh
                                </button>
                            </div>
                            
                            <div class="overflow-x-auto">
                                <table class="min-w-full divide-y divide-gray-200">
                                    <thead class="bg-gray-50">
                                        <tr>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Identifier</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Type</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Failed Attempts</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Locked Until</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">IP Address</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody id="locked-accounts-table" class="bg-white divide-y divide-gray-200">
                                        <!-- Data loaded via JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                            <div id="locked-accounts-empty" class="text-center py-8 text-gray-500 hidden">
                                <i class="bi bi-check-circle text-4xl text-green-400 mb-2"></i>
                                <p>No locked accounts at this time</p>
                            </div>
                        </div>

                        <!-- Security Logs Tab -->
                        <div id="seccontent-security-logs" class="security-tab-content hidden">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-xl font-bold text-gray-900">Security Event Logs</h3>
                                <div class="flex gap-2">
                                    <select id="filter-severity" onchange="loadSecurityLogs()" class="border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                        <option value="">All Severity</option>
                                        <option value="info">Info</option>
                                        <option value="warning">Warning</option>
                                        <option value="critical">Critical</option>
                                    </select>
                                    <select id="filter-event-type" onchange="loadSecurityLogs()" class="border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                        <option value="">All Events</option>
                                        <option value="login_success">Login Success</option>
                                        <option value="login_failed">Login Failed</option>
                                        <option value="account_locked">Account Locked</option>
                                        <option value="ip_blocked">IP Blocked</option>
                                        <option value="otp_failed">OTP Failed</option>
                                    </select>
                                    <button onclick="loadSecurityLogs()" class="text-blue-600 hover:text-blue-700 flex items-center gap-1">
                                        <i class="bi bi-arrow-clockwise"></i>
                                        Refresh
                                    </button>
                                </div>
                            </div>
                            
                            <div class="overflow-x-auto">
                                <table class="min-w-full divide-y divide-gray-200">
                                    <thead class="bg-gray-50">
                                        <tr>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Time</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Event</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Severity</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">User</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">IP Address</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Description</th>
                                        </tr>
                                    </thead>
                                    <tbody id="security-logs-table" class="bg-white divide-y divide-gray-200">
                                        <!-- Data loaded via JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                            
                            <!-- Pagination -->
                            <div id="logs-pagination" class="flex justify-between items-center mt-4">
                                <button onclick="previousPage()" id="btn-prev" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1" disabled>
                                    <i class="bi bi-chevron-left"></i>
                                    Previous
                                </button>
                                <span id="page-info" class="text-gray-700 font-medium">Page 1</span>
                                <button onclick="nextPage()" id="btn-next" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1">
                                    Next
                                    <i class="bi bi-chevron-right"></i>
                                </button>
                            </div>
                        </div>

                        <!-- IP Blacklist Tab -->
                        <div id="seccontent-ip-blacklist" class="security-tab-content hidden">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-xl font-bold text-gray-900">IP Blacklist</h3>
                                <button onclick="loadIPBlacklist()" class="text-blue-600 hover:text-blue-700 flex items-center gap-1">
                                    <i class="bi bi-arrow-clockwise"></i>
                                    Refresh
                                </button>
                            </div>
                            
                            <div class="overflow-x-auto">
                                <table class="min-w-full divide-y divide-gray-200">
                                    <thead class="bg-gray-50">
                                        <tr>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">IP Address</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Reason</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Block Type</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Blocked Until</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody id="ip-blacklist-table" class="bg-white divide-y divide-gray-200">
                                        <!-- Data loaded via JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                            <div id="ip-blacklist-empty" class="text-center py-8 text-gray-500 hidden">
                                <i class="bi bi-check-circle text-4xl text-green-400 mb-2"></i>
                                <p>No blacklisted IPs at this time</p>
                            </div>
                        </div>

                        <!-- Analytics Tab -->
                        <div id="seccontent-sec-analytics" class="security-tab-content hidden">
                            <h3 class="text-xl font-bold text-gray-900 mb-4">Security Analytics</h3>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                <!-- Event Breakdown Chart -->
                                <div class="bg-white rounded-xl shadow-md border border-gray-100 p-6">
                                    <h4 class="font-bold text-gray-800 mb-4 flex items-center gap-2">
                                        <i class="bi bi-bar-chart text-blue-600"></i>
                                        Event Breakdown (Last 7 Days)
                                    </h4>
                                    <div style="position: relative; height: 300px;">
                                        <canvas id="chart-events"></canvas>
                                    </div>
                                </div>
                                
                                <!-- Top Failed IPs -->
                                <div class="bg-white rounded-xl shadow-md border border-gray-100 p-6">
                                    <h4 class="font-bold text-gray-800 mb-4 flex items-center gap-2">
                                        <i class="bi bi-geo-alt text-red-600"></i>
                                        Top IPs with Failed Attempts
                                    </h4>
                                    <div id="top-failed-ips" class="space-y-2">
                                        <!-- Data loaded via JavaScript -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- All JavaScript has been extracted to external files -->
    
    <!-- External JavaScript Files -->
    <script src="assets/js/qr_scanner.js"></script>
    <script src="assets/js/notifications.js"></script>
    <script src="assets/js/security_dashboard.js"></script>
    <!-- Inline CSS removed - now in assets/css/admin_dashboard.css -->

    <!-- Floating QR Scanner Button -->
    <div class="qr-scan-button group" onclick="openQRScanner()" title="Scan QR Code">
        <i class="fas fa-camera"></i>
    </div>

    <!-- QR Scanner Modal -->
    <div id="qrScannerModal" class="qr-modal">
        <div class="qr-modal-content bg-white rounded-3xl shadow-2xl max-w-3xl w-full max-h-[92vh] flex flex-col animate-modal-in">
            <!-- Header - Fixed -->
            <div class="bg-gradient-to-r from-orange-600 via-orange-500 to-amber-500 p-6 rounded-t-3xl shadow-lg flex-shrink-0">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-4">
                        <div class="w-14 h-14 bg-white/20 backdrop-blur-md rounded-2xl flex items-center justify-center shadow-xl border border-white/30">
                            <i class="fas fa-qrcode text-white text-2xl"></i>
                        </div>
                        <div>
                            <h3 class="text-2xl font-bold text-white drop-shadow-md">QR Code Scanner</h3>
                            <p class="text-orange-100 text-sm font-medium mt-0.5">Scan student order QR codes</p>
                        </div>
                    </div>
                    <button onclick="closeQRScanner()" class="text-white hover:bg-white/20 p-3 rounded-xl transition-all duration-200 hover:rotate-90 transform">
                        <i class="fas fa-times text-2xl"></i>
                    </button>
                </div>
            </div>

            <!-- Scanner Content - Scrollable -->
            <div class="overflow-y-auto flex-1 custom-scrollbar" style="scrollbar-width: thin; scrollbar-color: #3b82f6 #e5e7eb;">
                <div class="p-6 bg-gradient-to-b from-gray-50 to-white">
                <!-- Scanner View -->
                <div id="qr-reader" class="mb-5 bg-gray-900 rounded-2xl overflow-hidden shadow-2xl border-4 border-orange-200"></div>

                <!-- Instructions -->
                <div class="bg-gradient-to-r from-blue-50 to-blue-100/50 border-l-4 border-blue-500 p-5 rounded-xl mb-5 shadow-sm">
                    <div class="flex items-start gap-4">
                        <div class="w-10 h-10 bg-blue-500 rounded-xl flex items-center justify-center flex-shrink-0 shadow-md">
                            <i class="fas fa-info-circle text-white text-lg"></i>
                        </div>
                        <div>
                            <h4 class="font-bold text-blue-900 mb-2 text-lg">How to scan:</h4>
                            <ul class="text-sm text-blue-800 space-y-2 font-medium">
                                <li class="flex items-center gap-2">
                                    <i class="fas fa-check-circle text-blue-600"></i>
                                    <span>Allow camera access when prompted</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <i class="fas fa-check-circle text-blue-600"></i>
                                    <span>Position the QR code within the frame</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <i class="fas fa-check-circle text-blue-600"></i>
                                    <span>Hold steady until the scanner detects it</span>
                                </li>
                                <li class="flex items-center gap-2">
                                    <i class="fas fa-check-circle text-blue-600"></i>
                                    <span>Order details will appear automatically</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Scan Result -->
                <div id="qr-scan-result" class="hidden">
                    <div class="bg-gradient-to-r from-green-50 to-emerald-100/50 border-2 border-green-300 p-5 rounded-2xl mb-5 shadow-lg">
                        <div class="flex items-start gap-4">
                            <div class="w-12 h-12 bg-green-500 rounded-xl flex items-center justify-center flex-shrink-0 shadow-md">
                                <i class="fas fa-check-circle text-white text-2xl"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-bold text-green-900 mb-3 text-xl">QR Code Detected!</h4>
                                <div id="qr-order-details" class="text-sm text-green-900">
                                    <!-- Order details will be inserted here -->
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Action Buttons -->
                    <div class="flex gap-3">
                        <button onclick="processScannedOrder()" class="flex-1 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white py-3.5 px-6 rounded-xl font-bold shadow-md hover:shadow-xl transition-all duration-200 transform hover:-translate-y-0.5">
                            <i class="fas fa-check mr-2"></i>
                            Process Order
                        </button>
                        <button onclick="scanAgain()" class="flex-1 bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white py-3.5 px-6 rounded-xl font-bold shadow-md hover:shadow-xl transition-all duration-200 transform hover:-translate-y-0.5">
                            <i class="fas fa-redo mr-2"></i>
                            Scan Again
                        </button>
                    </div>
                </div>

                <!-- Close Button -->
                <button onclick="closeQRScanner()" class="w-full mt-4 bg-gradient-to-r from-gray-200 to-gray-300 hover:from-gray-300 hover:to-gray-400 text-gray-800 py-3.5 px-6 rounded-xl font-bold shadow-md hover:shadow-lg transition-all duration-200">
                    <i class="fas fa-times mr-2"></i>
                    Close Scanner
                </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Core Scripts -->
    <script src="../assets/js/ui-utilities.js?v=1"></script>
    
    <!-- Enhanced UI Features -->
    <script src="../assets/js/gesture-system.js?v=1"></script>
    <script src="../assets/js/keyboard-shortcuts.js?v=1"></script>
    
    <script src="assets/js/admin_dashboard.js?v=3"></script>
</body>
</html>
